"use strict";var resolvables;resolvables={},angular.module("config",[]),angular.module("fork",[]),angular.module("common",["ui.route","config","fork","ngMobile","ngCookies","restangular","ui.bootstrap","ui.select2"]),angular.module("account",[]),angular.module("dashboard",[]),angular.module("pages",[]),angular.module("platform",[]),angular.module("admin",[]),angular.module("app",["config","common","dashboard","account","admin","pages","platform"]),angular.element(document).ready(function(){return angular.bootstrap(document,["app"])}),angular.module("account").config(["$routeProvider","WardenProvider",function(e,r){return r.simplify(e).set_template_prefix("views/account").when("freelancer.login").when("freelancer.login.custom_provider").when("freelancer.register").when("freelancer.register.custom_provider").when("employer.login").when("employer.login.custom_provider").when("employer.register").when("employer.register.custom_provider").when("account.email_confirmation/:userId/:token",{omitView:!0}).when("account.reset_password/:userId/:token")}]),angular.module("account").controller("AccountEmailConfirmationCtrl",["$scope","$routeParams","Auth","User",function(e,r,t,o){return o.activate_with_token(r.userId,r.token).then(function(r){return e.notify_success("Your email has been verified"),t.create_session({user_type:r.user_type,auth_id:r.auth_id,auth_provider:r.auth_provider,token:r.token})},function(){return e.notify_error("We are unable to activate this account.")}),e.$on("session:created",function(r,t){return e.attemptLogin().then(function(){return e.redirect_to("dashboard."+t.user_type.toLowerCase()+".profile",{success:"Please proceed to furnish your account information"})},function(){return e.notify_error("Unable to log you in")})})}]),angular.module("account").controller("AccountResetPasswordCtrl",["$scope","$routeParams","User",function(e,r,t){return e.user={new_password:""},e.submitForm=function(){return t.reset_password_with_token(r.userId,r.token,e.user.new_password).then(function(){return e.redirect_to("home",{success:"Your password is changed successfully. Please login"})},function(){return e.notify_error("Unable to reset password. Token is invalid.")})}}]),angular.module("account").controller("EmployerLoginCtrl",["$scope","Auth","CustomProvider","$dialog","RememberMe",function(e,r,t,o,n){return e.linkedinConnect=function(){return t.connect("linkedin","Employer","employer")},e.submitForm=function(){return e.remember_me?n.set(e.user.email):n.destroy(),e.clear_notifications(),r.authenticate("Employer",e.user.email,"local",e.user.password)},e.forgotPassword=function(){return o.dialog().open("dialogs/account.forgot_password.html").then(function(e){return null!=e?r.forgot_password("Employer",e,"local"):void 0})},e.user||(e.user={}),!n.isEmpty()&&n.email?e.user.email=n.email:void 0}]),angular.module("account").controller("EmployerLoginCustomProviderCtrl",["$scope","Auth","MemoryStore",function(e,r,t){var o;return o=t.get("auth_info"),e.user=o,console.log(o),t.clear(),e.submitForm=function(){return e.clear_notifications(),r.authenticate("Employer",e.user.auth_id,e.user.auth_provider,e.user.password)},e.forgotPassword=function(){return r.forgot_password(o.user_class,o.auth_id,o.auth_provider)}}]),angular.module("account").controller("EmployerRegisterCtrl",["$scope","Auth","CustomProvider",function(e,r,t){return e.linkedinConnect=function(){return t.connect("linkedin","Employer","employer")},e.submitForm=function(){var t;return e.clear_notifications(),t={first_name:e.user.first_name,last_name:e.user.last_name,photo_url:"styles/img/profile.jpg"},r.register("Employer",e.user.email,"local",e.user.email,e.user.password,t)}}]),angular.module("account").controller("EmployerRegisterCustomProviderCtrl",["$scope","Auth","MemoryStore",function(e,r,t){var o;return o=t.get("auth_info"),console.log(o),e.user=o,t.clear(),e.submitForm=function(){return e.clear_notifications(),r.register("Employer",e.user.auth_id,e.user.auth_provider,e.user.email,e.user.password,e.user.additional_fields)}}]),angular.module("account").controller("FreelancerLoginCtrl",["$scope","Auth","CustomProvider","$dialog","RememberMe",function(e,r,t,o,n){return e.linkedinConnect=function(){return t.connect("linkedin","Freelancer","freelancer")},e.submitForm=function(){return e.remember_me?n.set(e.user.email):n.destroy(),e.clear_notifications(),r.authenticate("Freelancer",e.user.email,"local",e.user.password)},e.forgotPassword=function(){return o.dialog().open("dialogs/account.forgot_password.html").then(function(e){return null!=e?r.forgot_password("Freelancer",e,"local"):void 0})},e.user||(e.user={}),!n.isEmpty()&&n.email?e.user.email=n.email:void 0}]),angular.module("account").controller("FreelancerLoginCustomProviderCtrl",["$scope","Auth","MemoryStore",function(e,r,t){var o;return o=t.get("auth_info"),e.user=o,t.clear(),e.submitForm=function(){return e.clear_notifications(),r.authenticate("Freelancer",e.user.auth_id,e.user.auth_provider,e.user.password)},e.forgotPassword=function(){return r.forgot_password(o.user_class,o.auth_id,o.auth_provider)}}]),angular.module("account").controller("FreelancerRegisterCtrl",["$scope","Auth","CustomProvider",function(e,r,t){return e.linkedinConnect=function(){return t.connect("linkedin","Freelancer","freelancer")},e.submitForm=function(){var t;return e.clear_notifications(),t={first_name:e.user.first_name,last_name:e.user.last_name,photo_url:"styles/img/profile.jpg"},r.register("Freelancer",e.user.email,"local",e.user.email,e.user.password,t)}}]),angular.module("account").controller("FreelancerRegisterCustomProviderCtrl",["$scope","Auth","MemoryStore",function(e,r,t){var o;return o=t.get("auth_info"),console.log(o),e.user=o,t.clear(),e.submitForm=function(){return e.clear_notifications(),r.register("Freelancer",e.user.auth_id,e.user.auth_provider,e.user.email,e.user.password,e.user.additional_fields)}}]),angular.module("account").run(["$rootScope","Auth","$q","RouteSession",function(e,r,t,o){return e.logout=function(){return r.logout(),e.$broadcast("logged_out"),e.redirect_to("",{success:"You are logged out"})},e.attemptLogin=function(o){var n,i;return null==o&&(o={}),i=t.defer(),null!=e.authenticated&&e.authenticated?(e.$broadcast("user_ready"),i.resolve(e.current_user)):(n=r.user({delegate:!0}),n.then(function(r){return e.current_user=r,e.authenticated=!0,e.user_class=r.user_type,e.user_type=r.user_type.toLowerCase(),"function"==typeof o.successHandler&&o.successHandler(r),e.$broadcast("user_ready"),i.resolve(r)},function(){return e.current_user=null,e.authenticated=!1,e.user_class="User",e.user_type="guest",e.$broadcast("user_ready"),"function"==typeof o.failedHandler&&o.failedHandler(user),i.reject("user is not logged in")})),i.promise},angular.forEach(["logged_out","login:started"],function(r){return e.$on(r,function(){return e.current_user=null,e.authenticated=!1,e.user_class="User",e.user_type="guest"})}),e.$on("authenticate:success",function(r,t){return e.attemptLogin({successHandler:function(r){var n,i;return console.log(e.user_type),i=t.register?"Welcome to CreativesAtWork!":"You are logged in",o.isEmpty()?"admin"===e.user_type?e.redirect_to("admin.users"):e.redirect_to("dashboard."+r.user_type.toLowerCase()+".profile",{success:i}):(n=o.path,o.destroy(),e.redirect_to(n,{success:"You are logged in!"}))}})}),e.attemptLogin()}]);var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("account").factory("User",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(r){function t(){return n=t.__super__.constructor.apply(this,arguments)}return __extends(t,r),t.prototype.get_from_account=function(r,t,o){return this.before_operation({user_type:r,auth_id:t,auth_provider:o}),e.all("users").customGET("get_from_account",{user_type:r,auth_id:t,auth_provider:o})},t.prototype.authenticate_with_token=function(r){return this.before_operation({session:r}),e.all("users").customGET("authenticate_with_token",r)},t.prototype.register=function(r,t,o,n,i,a){var u;return u={user_type:r,auth_id:t,auth_provider:o,email:n,password:i,additional_fields:a},this.before_operation(u),e.all("users").customPOST("register",{},{},u)},t.prototype.authenticate=function(r,t,o,n){var i;return i={user_type:r,auth_id:t,auth_provider:o,password:n},this.before_operation(i),e.all("users").customGET("authenticate",i)},t.prototype.activate_with_token=function(r,t){var o;return o={token:t},this.before_operation(o),e.one("users",r).customGET("activate_with_token",o)},t.prototype.forgot_password=function(r,t,o){var n;return n={user_type:r,auth_id:t,auth_provider:o},this.before_operation(n),e.all("users").customPOST("forgot_password",{},{},n)},t.prototype.reset_password_with_token=function(r,t,o){var n;return n={token:t,new_password:o},console.log(n),this.before_operation(n),e.one("users",r).customPOST("reset_password_with_token",{},{},n)},t.prototype.clear_notifications=function(r){return e.one("users",r).customPOST("clear_notifications",{},{})},t}(BaseModel),new o(e,r,t,"user","users")}]),resolvables.admin=["Auth","$q","$rootScope",function(e,r,t){var o;return o=e.user({delegate:!0}),o.then(function(e){return t.current_user=e,t.authenticated=!0,t.user_class=e.user_type,t.user_type=e.user_type.toLowerCase(),"admin"===t.user_type?e:(t.notify_error("Please login as admin",!1),r.reject("Access not allowed"))},function(){return t.current_user=null,t.authenticated=!1,t.user_class="User",t.user_type="guest",t.notify_error("Please login first",!1),r.reject("Access not allowed")})}],resolvables.current_user=["Auth","$q","$rootScope","$location","RouteSession",function(e,r,t,o,n){var i;return i=e.user({delegate:!0}),i.then(function(e){return t.current_user=e,t.authenticated=!0,t.user_class=e.user_type,t.user_type=e.user_type.toLowerCase(),e},function(){return t.current_user=null,t.authenticated=!1,t.user_class="User",t.user_type="guest",t.notify_error("Please login first",!1),n.set(o.path()),o.path("home"),r.reject("Access not allowed")})}],angular.module("account").service("Auth",["$rootScope","$http","ErrorProcessor","Session","User","$q",function(e,r,t,o,n,i){return this.create_session=function(t){return o.set(t.user_type,t.auth_id,t.auth_provider,t.token),r.defaults.headers.common["User-Authorization"]=o.as_json(),console.log(t),e.$broadcast("session:created",t)},this.user=function(e){var r;return null==e&&(e={}),o.isEmpty()?i.reject("Session does not exist"):(r=this.authenticate_with_token(o.attributes()),null!=e.delegate&&e.delegate?r:r.then(function(e){return e},function(e){return t.process_login(e)}))},this.register=function(r,o,i,a,u,s){var c=this;return n.register(r,o,i,a,u,s).then(function(t){return t.email_confirmation?e.notify_info("An email has been sent to verify your email address."):c.authenticate(r,o,i,u,!0)},function(e){return console.log(e),t.process_registration(e)})},this.authenticate=function(r,i,a,u,s,c){var l=this;return null==u&&(u=null),null==s&&(s=!1),null==c&&(c={}),o.destroy(),e.$broadcast("login:started"),n.authenticate(r,i,a,u).then(function(r){return l.create_session(r),e.$broadcast("authenticate:success",{authenticated:r,register:s}),"function"==typeof c.successHandler?c.successHandler(r):void 0},function(e){return t.process_login(e),"function"==typeof c.errorHandler?c.errorHandler(e):void 0})},this.authenticate_with_token=function(e){return n.authenticate_with_token(e)},this.logout=function(){return o.destroy()},this.forgot_password=function(r,o,i,a){return null==a&&(a={}),n.forgot_password(r,o,i).then(function(r){return e.notify_success("An email has been sent to you to reset your password"),"function"==typeof a.successHandler?a.successHandler(r):void 0},function(e){return console.log(e),t.process_forgot_password(e),"function"==typeof a.errorHandler?a.errorHandler(e):void 0})},this}]),angular.module("account").factory("CustomProvider",["Auth","User","$rootScope","MemoryStore","$timeout",function(e,r,t,o,n){var i;return i=function(){function e(){}var i,a,u,s;return a=function(){return t.notify_error("You need to authorize this app in order to log in")},i=function(e){return n(function(){var n;return n=r.get_from_account(e.user_class,e.auth_id,e.auth_provider),n.then(function(){return o.set("auth_info",e),t.redirect_to(""+e.user_type+".login.custom_provider")},function(){return o.set("auth_info",e),t.redirect_to(""+e.user_type+".register.custom_provider")})},100)},u=function(e,r,t){return e.authResponse?FB.api("/me",function(e){var o;return i({user_class:r,user_type:t,auth_id:e.id,auth_provider:"facebook",email:e.email,additional_fields:{first_name:e.first_name,last_name:e.last_name,location:null!=(o=e.location)?o.name:void 0,photo_url:"http://graph.facebook.com/"+e.id+"/picture"}})}):a()},s=function(e,r){return IN.API.Profile("me").fields("id","email-address","first-name","last-name","location","summary","specialties","positions","picture-url","public-profile-url","skills","certifications","educations","date-of-birth","three-current-positions").result(function(t){var o,n,a,u,s,c,l,d;return o={user_class:e,user_type:r,auth_id:t.values[0].emailAddress,auth_provider:"linkedin",email:t.values[0].emailAddress,additional_fields:{first_name:t.values[0].firstName,last_name:t.values[0].lastName,photo_url:t.values[0].pictureUrl,location:null!=(n=t.values[0].location)?n.name:void 0}},"freelancer"===r&&(o.additional_fields.job_title=null!=(a=t.values[0].threeCurrentPositions)?null!=(u=a.values)?null!=(s=u[0])?s.title:void 0:void 0:void 0,o.additional_fields.professional_history=null!=(c=t.values[0].threeCurrentPositions)?null!=(l=c.values)?null!=(d=l[0])?d.summary:void 0:void 0:void 0,o.additional_fields.other_information=t.values[0].summary),IN.API.Raw("/people/~/picture-urls::(original)").result(function(e){return o.additional_fields.photo_url=e.values[0]}),i(o)})},e.prototype.connect=function(e,r,o){return t.start_ajax(),n(function(){var t;switch(e){case"facebook":return FB.login(function(e){return u(e,r,o)},{scope:"email, user_about_me, user_location, publish_actions"});case"linkedin":return(null!=(t=IN.User)?t.isAuthorized():void 0)?s(r,o):(IN.User.authorize(),IN.Event.on(IN,"auth",function(){return s(r,o)}))}},100)},e}(),new i}]),angular.module("account").factory("RememberMe",["$cookieStore",function(e){var r;return r=function(){function r(){this._init()}return r.prototype._init=function(){var r;return r=e.get("RememberMe"),this.email=null!=r?r.email:void 0},r.prototype.attributes=function(){return{email:this.email}},r.prototype.set=function(r){return this.email=r,e.put("RememberMe",this.attributes())},r.prototype.destroy=function(){return this.email=null,e.remove("RememberMe")},r.prototype.as_json=function(){return JSON.stringify(this.attributes())},r.prototype.isEmpty=function(){return"{}"===this.as_json()},r}(),new r}]),angular.module("account").factory("Session",["$cookieStore",function(e){var r;return r=function(){function r(){this._init()}return r.prototype._init=function(){var r;return r=e.get("AuthSession"),this.user_type=null!=r?r.user_type:void 0,this.auth_id=null!=r?r.auth_id:void 0,this.auth_provider=null!=r?r.auth_provider:void 0,this.token=null!=r?r.token:void 0},r.prototype.attributes=function(){return{user_type:this.user_type,auth_id:this.auth_id,auth_provider:this.auth_provider,token:this.token}},r.prototype.set=function(r,t,o,n){return this.user_type=r,this.auth_id=t,this.auth_provider=o,this.token=n,e.put("AuthSession",this.attributes())},r.prototype.destroy=function(){return this.user_type=null,this.auth_id=null,this.auth_provider=null,this.token=null,e.remove("AuthSession")},r.prototype.as_json=function(){return JSON.stringify(this.attributes())},r.prototype.isEmpty=function(){return"{}"===this.as_json()},r}(),new r}]),angular.module("admin").config(["$routeProvider","WardenProvider",function(e,r){return r.simplify(e).require_admin().set_template_prefix("views/admin").when("admin.login",{omitController:!0,admin:!1}).when("admin.users",{resolves:["job_categories"]}).when("admin.employers")}]),angular.module("admin").controller("AdminEmployersCtrl",["$scope","Employer","$route","ServiceEndpoint",function(e,r,t,o){var n,i=this;return e.svcEndpoint=o,this.refreshList=function(){return r.count(e.query).then(function(r){return e.total_results=r,e.total_pages=Math.ceil(r/e.query.per_page)},function(){return e.notify_error("Unable to fetch count from server")}),r.all(e.query).then(function(r){return e.employers=r},function(){return e.notify_error("Unable to fetch result from server")})},e.clearFilters=function(){return t.reload()},n=function(){return e.query={},e.query.search="",e.query.page=1,e.query.order="first_name ASC",e.query.per_page=15,e.$watch("query",function(e,r,t){return e.page===r.page&&(t.query.page=1),i.refreshList()},!0),i.refreshList()},n()}]),angular.module("admin").controller("AdminUsersCtrl",["$scope","Freelancer","job_categories","$route","ServiceEndpoint",function(e,r,t,o,n){var i,a=this;return e.svcEndpoint=n,e.$watch("query.conditions.job_title",function(r){return angular.forEach(e.jobTitles,function(t,o){return angular.forEach(t,function(t){return angular.equals(r,t)?e.current_job_category=o:void 0})})}),e.$on("search:menu",function(r,t){return t.selected===!1?(delete e.query.conditions.job_title,e.current_job_title="All"):(e.query.conditions.job_title=t.selected,e.current_job_title=t.selected)}),e.$on("search:input",function(r,t){return null!=t&&t.length>0?e.query.search=t:delete e.query.search}),this.refreshList=function(){return r.count(e.query).then(function(r){return e.total_results=r,e.total_pages=Math.ceil(r/e.query.per_page)},function(){return e.notify_error("Unable to fetch count from server")}),r.all(e.query).then(function(r){return e.freelancers=r},function(){return e.notify_error("Unable to fetch result from server")})},e.clearFilters=function(){return o.reload()},i=function(){return e.jobTitles={Writing:_.uniq(["Copywriter","Editor","Journalist","Scriptwriter","Writer"]),Design:_.uniq(["Art Director","Audio Designer","Character Designer","Creative Director","Game Designer","Graphic Designer","Lighting Designer","Motion Graphic Designer","Multimedia Designer","Product Designer","Set Designer","UI/UX Designer","Wardrode Designer","Web Designer"]),Production:_.uniq(["2D Animator","3D Animator","3D Artist","Animator","Audio Producer","Camera Assistant","Cameraman","Casting Manager","DI Artist","Director","Director and Producer","Director of Photography","Grip & Gaffer","Illustrator","Lightingman","Location Manager","Make Up Artist","Musician","Photographer","Production Assistant","Production Manager","Project Manager","Soundman","Storyboard Artist","VFX Artist","Video Editor","Video Producer","Videographer","Videographer and SteadiCam Operator"]),Others:_.uniq(["Commentator","Host","Marketing","PR","Social Media Consultant","Translator","Voiceover Artist","Web Developer"])},e.current_job_title="All",e.current_job_category="All",e.query={},e.query.search="",e.query.page=1,e.query.order="first_name ASC",e.query.per_page=15,e.job_categories=t,e.$watch("query",function(e,r,t){return e.page===r.page&&(t.query.page=1),a.refreshList()},!0),a.refreshList()},i()}]),angular.module("admin").directive("adminDashboardSidebar",[function(){return{restrict:"EA",replace:!0,templateUrl:"partials/admin/admin_dashboard_sidebar.html"}}]),angular.module("admin").directive("adminLoginForm",[function(){return{restrict:"EA",replace:!0,scope:{},templateUrl:"forms/admin/login.form.html",controller:["$scope","$rootScope","$routeParams","Auth",function(e,r,t,o){var n;return e.hasError=function(r){return!r.$valid&&(r.$dirty||e.submitted)},e.login=function(){return e.submitted=!0,e.form.$valid?(r.clear_notifications(),o.authenticate("Admin",e.user.email,"local",e.user.password)):void 0},e.submitted=!1,n=function(){return r.authenticated?r.redirect_to("admin.users",{info:"You have already logged in"}):void 0},r.$on("user_ready",n)}]}}]),angular.module("account").config(["$routeProvider","$locationProvider",function(e,r){return e.otherwise({redirectTo:"/home"}),r.html5Mode(!1)}]),angular.module("common").config(["$dialogProvider",function(e){return e.options({backdrop:!0,dialogClass:"modal",backdropClass:"modal-backdrop",transitionClass:"fade",triggerClass:"in",dialogOpenClass:"modal-open",backdropFade:!0,dialogFade:!0,keyboard:!0,backdropClick:!0,controller:["$scope","dialog",function(e,r){return e.close=function(e){return r.close(e)}}]})}]),angular.module("common").config(["$httpProvider",function(e){var r;return r=["$q","$injector","$rootScope",function(e,r,t){var o,n;return n=function(e){var o;return o=r.get("$http"),1>o.pendingRequests.length&&t.$broadcast("ajax_loading:stopped"),e},o=function(o){var n;return n=r.get("$http"),1>n.pendingRequests.length&&t.$broadcast("ajax_loading:stopped"),e.reject(o)},function(e){return t.$broadcast("ajax_loading:started"),e.then(n,o)}}],e.responseInterceptors.push(r)}]),angular.module("common").config(["RestangularProvider","ServiceEndpoint",function(e,r){return e.setBaseUrl(r),e.setListTypeIsArray(!0),e.setFullRequestInterceptor(function(e,r,t,o,n,i){var a,u,s,c;if(null!=(null!=e?e._deny_fields:void 0))for(c=e._deny_fields,u=0,s=c.length;s>u;u++)a=c[u],delete e[a];return{element:e,operation:r,route:t,url:o,headers:n,params:i}}),e.setResponseExtractor(function(e){return e})}]),angular.module("common").directive("alerter",[function(){return{restrict:"E",replace:!0,scope:{closeCountDown:"@"},controller:["$scope","$timeout",function(e,r){var t,o;return e.alerts=[],o={dir1:"down",dir2:"left",push:"top",spacing1:25,spacing2:25,firstpos1:125,firstpos2:25},t=null,$.pnotify.defaults.history=!1,e.addAlert=function(n,i){var a,u,s;return u=function(){var r,t,o,n;for(o=e.alerts,n=[],r=0,t=o.length;t>r;r++)a=o[r],n.push(a.msg);return n}(),u.indexOf(i)>=0?void 0:(e.alerts.push({type:n,msg:i}),$.pnotify({text:i,type:n,stack:o}),null!=t&&r.cancel(t),s=3e3,angular.isDefined(e.closeCountDown)&&(s=e.closeCountDown),t=r(function(){return e.clearAlerts()},s))},e.clearAlerts=function(){return e.alerts=[],$.pnotify_remove_all()},e.$on("notification:info",function(r,t){return e.addAlert("info",t)}),e.$on("notification:success",function(r,t){return e.addAlert("success",t)}),e.$on("notification:error",function(r,t){return e.addAlert("error",t)}),e.$on("notification:clear",function(){return e.clearAlerts()})}]}}]),angular.module("common").directive("fileupload",[function(){return{restrict:"A",scope:{uploaderId:"@",serverDomain:"@",servicePath:"@"},link:function(e,r,t){var o;return o={url:""+t.serverDomain+"/"+t.servicePath,dataType:"json",add:function(r,o){return e.$emit("fileupload:add",{id:t.uploaderId,domain:t.serverDomain,path:t.servicePath,data:o}),o.submit()},done:function(r,o){return e.$emit("fileupload:done",{id:t.uploaderId,domain:t.serverDomain,path:t.servicePath,data:o})},progress:function(r,o){return e.$emit("fileupload:progress",{id:t.uploaderId,domain:t.serverDomain,path:t.servicePath,data:o})},fail:function(r,o){return e.$emit("fileupload:fail",{id:t.uploaderId,domain:t.serverDomain,path:t.servicePath,data:o})}},r.fileupload(o)}}}]),angular.module("common").directive("nailthumb",[function(){return{restrict:"A",scope:{method:"@",width:"@",height:"@",replaceAnimation:"@",ngSrc:"@"},link:function(e,r,t){var o;return o={method:"crop",width:"125",height:"125",replaceAnimation:"fade"},null!=t.method&&(o.method=t.method),null!=t.width&&(o.width=t.width),null!=t.height&&(o.height=t.height),null!=t.replaceAnimation&&(o.replaceAnimation=t.replaceAnimation),t.$observe("ngSrc",function(){return r.nailthumb(o)})}}}]),angular.module("common").directive("passwordVerify",function(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(e,r,t,o){return e.$watch(function(){var r;return r=void 0,(e.passwordVerify||o.$viewValue)&&(r=e.passwordVerify+"_"+o.$viewValue),r},function(r){return r?o.$parsers.unshift(function(r){var t;return t=e.passwordVerify,t!==r?(o.$setValidity("passwordVerify",!1),void 0):(o.$setValidity("passwordVerify",!0),r)}):void 0})}}}),angular.module("common").directive("spinner",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/common/spinner.html",controller:["$scope",function(e){return e.$on("ajax_loading:started",function(){return e.isLoading=!0}),e.$on("ajax_loading:stopped",function(){return e.isLoading=!1})}],link:function(){var e,r;return e={lines:12,length:7,width:5,radius:10,color:"#fff",speed:1,trail:66,shadow:!0,left:"78px",top:"78px"},r=document.getElementById("spin"),new Spinner(e).spin(r)}}}]),angular.module("common").directive("tagsinput",[function(){return{restrict:"A",require:"?ngModel",link:function(e,r,t,o){var n,i,a;if(o)return n=!1,i={onChange:function(){return a()}},a=function(){return o.$setViewValue(r.val())},o.$render=function(){return angular.isString(o.$viewValue)&&(r.val(o.$viewValue),r.attr("value",o.$viewValue)),n?void 0:(r.tagsInput(i),n=!0)}}}}]),angular.module("common").run(["$rootScope",function(e){return e.start_ajax=function(){return e.$broadcast("ajax_loading:started")},e.stop_ajax=function(){return e.$broadcast("ajax_loading:stopped")}}]),angular.module("common").run(["$rootScope","$location",function(e,r){return e.$on("$routeChangeSuccess",function(){return ga("send","pageview",r.path()),console.log(r.path())})}]),angular.module("common").run(["$rootScope","$log",function(e,r){return e.alert=function(e){return alert(e)},e.log=function(e){return r.log(e)},e.warn=function(e){return r.warn(e)},e.error=function(e){return r.error(e)}}]),angular.module("common").run(["$rootScope",function(e){return e.notify_info=function(r,t){return null==t&&(t=!1),t||e.$broadcast("notification:clear"),e.$broadcast("notification:info",r)},e.notify_error=function(r,t){return null==t&&(t=!0),t||e.$broadcast("notification:clear"),e.$broadcast("notification:error",r)},e.notify_success=function(r,t){return null==t&&(t=!1),t||e.$broadcast("notification:clear"),e.$broadcast("notification:success",r)},e.clear_notifications=function(){return e.$broadcast("notification:clear")}}]),angular.module("common").run(["$rootScope","$location",function(e,r){return e.redirect_to=function(t,o){return null==o&&(o={}),t=t.replace(/^\//,""),null!=o.success&&e.notify_success(o.success),null!=o.info&&e.notify_info(o.info),null!=o.error&&e.notify_error(o.error),r.path("/"+t)}}]),angular.module("common").run(["$rootScope","$location",function(e,r){return e.$current_route="/",e.$on("$routeChangeSuccess",function(){return e.$current_route=r.path()})}]),angular.module("common").filter("inflector",function(){var e,r,t;return t=function(e){return e.replace(/^([a-z])|\s+([a-z])/g,function(e){return e.toUpperCase()})},e=function(e,r){return e.replace(/[A-Z]/g,function(e){return r+e})},r={humanize:function(r){return t(e(r," ").split("_").join(" "))},underscore:function(r){return r.substr(0,1).toLowerCase()+e(r.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(e){return e=e.substr(0,1).toLowerCase()+t(e.split("_").join(" ")).substr(1).split(" ").join("")}},function(e,t){return t!==!1&&angular.isString(e)?(t=t||"humanize",r[t](e)):e}});var BaseModel;BaseModel=function(){function e(e,r,t,o,n){this.Restangular=e,this.$rootScope=r,this.$filter=t,this.singularName=o,this.pluralName=n,this.humanizedSingularName=this.$filter("inflector")(this.singularName,"humanize"),this.humanizedPluralName=this.$filter("inflector")(this.pluralName,"humanize")}return e.prototype.before_operation=function(){return this.$rootScope.$broadcast("ajax_loading:started")},e.prototype.operation_success=function(){return this.$rootScope.$broadcast("ajax_loading:stopped")},e.prototype.operation_failed=function(){return this.$rootScope.$broadcast("ajax_loading:stopped")},e.prototype.create=function(e,r){var t,o,n=this;return null==r&&(r={}),this.before_operation({model:e,options:r}),o=this.Restangular.all(this.pluralName).post(e),null!=r.delegate&&r.delegate?o:(t={notify_success:!0,notify_error:!0},null!=r.notify_success&&(t.notify_success=r.notify_success),null!=r.notify_error&&(t.notify_error=r.notify_error),o.then(function(e){return n.operation_success({item:e}),t.notify_success&&n.$rootScope.notify_success(""+n.humanizedSingularName+" created successfully"),e},function(o){return n.operation_failed({response:o,model:e,options:r}),t.notify_error&&n.$rootScope.notify_error("Failed to create "+n.humanizedSingularName),console.log("@create error: "),console.log(o)}))},e.prototype.count=function(e){var r,t,o=this;return null==e&&(e={}),this.before_operation({options:e}),t={},null!=e.conditions&&(t.conditions=JSON.stringify(e.conditions)),null!=e.search&&(t.search=e.search),r=this.Restangular.all(this.pluralName).customGET("count",t),null!=e.delegate&&e.delegate?r:r.then(function(e){return o.operation_success({count:e}),e},function(r){return o.operation_failed({response:r,options:e}),console.log("@count error:"),console.log(r)})},e.prototype.all=function(e){var r,t,o=this;return null==e&&(e={}),this.before_operation({options:e}),t={limit:1e3,offset:0,order:"created_at DESC",page:1,per_page:100},null!=e.limit&&(t.limit=e.limit),null!=e.offset&&(t.offset=e.offset),null!=e.order&&(t.order=e.order),null!=e.page&&(t.page=e.page),null!=e.per_page&&(t.per_page=e.per_page),null!=e.includes&&(t.includes=JSON.stringify(e.includes)),null!=e.conditions&&(t.conditions=JSON.stringify(e.conditions)),null!=e.search&&(t.search=e.search),r=this.Restangular.all(this.pluralName).getList(t),null!=e.delegate&&e.delegate?r:r.then(function(e){return o.operation_success({list:e}),e},function(r){return o.operation_failed({response:r,options:e}),console.log("@all error:"),console.log(r)})},e.prototype.find=function(e,r){var t,o,n=this;return null==r&&(r={}),this.before_operation({id:e,options:r}),o={},null!=r.includes&&(o.includes=JSON.stringify(r.includes)),t=this.Restangular.one(this.pluralName,e).get(o),null!=r.delegate&&r.delegate?t:t.then(function(e){return n.operation_success({item:e}),e},function(e){return n.operation_failed({response:e}),n.$rootScope.notify_error("Unable to find "+n.humanizedSingularName),console.log("@find error"),console.log(e)})},e.prototype.destroy=function(e,r){var t,o=this;return null==r&&(r={}),this.before_operation({id:e,options:r}),console.log(e),console.log(this.Restangular.one(this.pluralName,e).remove),t=this.Restangular.one(this.pluralName,e).remove(),null!=r.delegate&&r.delegate?t:t.then(function(e){return o.operation_success({item:e})},function(e){return o.operation_failed({response:e}),o.$rootScope.notify_error("Unable to delete "+o.humanizedSingularName),console.log("@destroy error"),console.log(e)})},e}();var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("common").factory("CommonApi",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(r){function t(){return n=t.__super__.constructor.apply(this,arguments)}return __extends(t,r),t.prototype.submit_question_about_freelancer_to_admin=function(r,t,o){return e.all("common").customPOST("submit_question_about_freelancer_to_admin",{question:r,freelancer_id:t,employer_id:o})},t}(BaseModel),new o(e,r,t,"common","common")}]),angular.module("common").provider("Warden",function(){var e;return e=function(){function e(){}return e.prototype.$get=function(){},e.prototype.simplify=function(e){return this.routeProvider=e,this.requireUser=!1,this.requireAdmin=!1,this.omitView=!1,this.omitController=!1,this},e.prototype.set_template_prefix=function(e){return this.templatePrefix=e,"/"!==e.slice(-1)&&(this.templatePrefix+="/"),this},e.prototype.require_user=function(){return this.requireUser=!0,this},e.prototype.require_admin=function(){return this.requireAdmin=!0,this
},e.prototype.omit_view=function(){return this.omitView=!0,this},e.prototype.omit_controller=function(){return this.omitController=!0,this},e.prototype.when=function(e,r){var t,o,n,i,a,u,s,c,l,d,f,p;if(null==r&&(r={}),"/"===e.slice(0,1)&&(e=e.slice(1)),t=e.split("/")[0],n=function(){var e,r,o,n;for(o=t.split(/\.|_/),n=[],e=0,r=o.length;r>e;e++)c=o[e],n.push(c.capitalize());return n}(),u=r.route||"/"+e,o=""+n.join("")+"Ctrl",s=""+this.templatePrefix+t+".html",a={},null==r.user&&(r.user=this.requireUser),null==r.admin&&(r.admin=this.requireAdmin),null==r.omitView&&(r.omitView=this.omitView),null==r.omitController&&(r.omitController=this.omitController),r.user&&(a.current_user=resolvables.current_user),r.admin&&(a.admin=resolvables.admin),null!=r.resolves)for(p=r.resolves,d=0,f=p.length;f>d;d++)i=p[d],a[i]=resolvables[i];return r.omitView&&(s="views/pages/empty.html"),null!=r.templateUrl&&(s=r.templateUrl),l="3.5",s+="?v="+l,r.omitController?this.routeProvider.when(u,{templateUrl:s,resolve:a}):this.routeProvider.when(u,{templateUrl:s,controller:o,resolve:a}),this},e}(),new e}),angular.module("common").service("ErrorProcessor",["$rootScope","$log",function(e,r){return this.process_save=function(t,o){var n,i,a,u,s;switch(t.status){case 422:u=t.data,s=[];for(a in u)i=u[a],s.push(function(){var t,o,u;for(u=[],t=0,o=i.length;o>t;t++)n=i[t],r.error(n),u.push(e.notify_error(""+a+" "+n));return u}());return s;default:return null!=o?o():e.notify_error("Unable to complete your request. Please contact the administrator.")}},this.process_login=function(r,t){switch(r.status){case 401:if("message"in r.data)return e.notify_error(r.data.message);break;default:return null!=t?t():e.notify_error("Sorry, we are unable to log you in. Please contact the administrator.")}},this.process_registration=function(r,t){switch(r.status){case 401:if("message"in r.data)return e.notify_error(r.data.message);break;default:return null!=t?t():e.notify_error("Sorry, we are unable to proceed with registration. Please contact the administrator.")}},this.process_forgot_password=function(r,t){switch(r.status){case 401:if("message"in r.data)return e.notify_error(r.data.message);break;default:return null!=t?t():e.notify_error("Sorry, we are unable to reset your password. Please contact the administrator")}},this}]),angular.module("common").service("FormHandler",["$rootScope",function(e){return this.formify=function(e){return e.submitted=!1,e.form_object={},e.hasError=function(r){return!r.$valid&&(r.$dirty||e.submitted)},e.removeAssoc=function(e,r){return null!=e[r].id?e[r]._destroy=!0:e.splice(r,1)}},this.validate=function(r,t){var o;return null==t&&(t=!0),t&&window.scrollTo(0,0),o=0,angular.forEach(r,function(r,t){return angular.forEach(r,function(r){var n;if(o+=1,4>o)switch(t){case"required":if(r.$error.required===!0){if(null!=r.$name)return e.notify_error(""+(null!=(n=r.$name)?n.humanize():void 0)+" is missing.")}else if(angular.isArray(r.$error.required)&&null!=r.$error.required[0].$name)return e.notify_error(""+r.$error.required[0].$name.humanize()+" is missing");break;case"email":if(r.$error.email===!0){if(null!=r.$viewValue)return e.notify_error(""+r.$viewValue+" is not a valid email.")}else if(angular.isArray(r.$error.email)&&null!=r.$error.email[0].$viewValue)return e.notify_error(""+r.$error.email[0].$viewValue+" is not a valid email.");break;case"url":if(r.$error.url===!0){if(null!=r.$viewValue)return e.notify_error(""+r.$viewValue+" is not a valid url.")}else if(angular.isArray(r.$error.url)&&null!=r.$error.url[0].$viewValue)return e.notify_error(""+r.$error.url[0].$viewValue+" is not a valid url.")}})})},this.handleImage=function(r,t,o,n,i){return null==n&&(n="Uploading.."),null==i&&(i="Failed to upload picture."),r.$on("fileupload:add",function(e,o){return r.$apply(function(){switch(o.id){case t:return r[""+t+"_state"]=n}})}),r.$on("fileupload:done",function(e,n){return r.$apply(function(){var e,i,a,u,s,c,l,d,f,p,_,m;if(a=null!=(u=n.data.result)?null!=(s=u.data)?null!=(c=s.content)?c.url:void 0:void 0:void 0,e=null!=(l=n.data.result)?null!=(d=l.data)?null!=(f=d.avatar)?f.url:void 0:void 0:void 0,i=null!=(p=n.data.result)?null!=(_=p.data)?null!=(m=_.thumb)?m.url:void 0:void 0:void 0,null!=a)switch(n.id){case t:return r[""+t+"_state"]="",o.push({url:n.domain+a,avatar_url:n.domain+e,thumb_url:n.domain+i})}})}),r.$on("fileupload:failed",function(){return e.notify_error(i,!1)})},this}]),angular.module("common").service("MemoryStore",[function(){var e;return e={},this.set=function(r,t){return e[r]=t},this.get=function(r){return e[r]},this.del=function(r){return delete e[r]},this.inspect=function(){return e},this.clear=function(){return e={}},this}]),angular.module("account").factory("RouteSession",["$cookieStore",function(e){var r;return r=function(){function r(){this._init()}return r.prototype._init=function(){var r;return r=e.get("RouteSession"),this.path=null!=r?r.path:void 0},r.prototype.attributes=function(){return{path:this.path}},r.prototype.set=function(r){return this.path=r,e.put("RouteSession",this.attributes())},r.prototype.destroy=function(){return this.path=null,e.remove("RouteSession")},r.prototype.as_json=function(){return JSON.stringify(this.attributes())},r.prototype.isEmpty=function(){return"{}"===this.as_json()},r}(),new r}]),angular.module("config").constant("ServiceEndpoint","http://creativesatwork.me:3636"),angular.module("dashboard").controller("DashboardEmployerNotificationsCtrl",["$scope","User",function(e,r){return r.clear_notifications(e.current_user.id)}]),angular.module("dashboard").controller("DashboardEmployerProfileCtrl",["$scope","$rootScope",function(e,r){var t;return e.hasError=function(r){return!r.$valid&&(r.$dirty||e.submitted)},e.submitForm=function(){return e.submitted=!0,e.form.$valid?(e.clear_notifications(),r.current_user.put().then(function(t){return r.current_user=t,e.notify_success("Your profile is updated successfully")},function(){return window.scrollTo(0,0),e.notify_error("Form has missing or invalid values")})):(window.scrollTo(0,0),angular.forEach(e.form.$error,function(r,t){return angular.forEach(r,function(r){var o;switch(t){case"required":if(r.$error.required===!0)return e.notify_error(""+(null!=(o=r.$name)?o.humanize():void 0)+" is missing.");if(angular.isArray(r.$error.required))return e.notify_error(""+r.$error.required[0].$name.humanize()+" is missing");break;case"email":if(r.$error.email===!0)return e.notify_error(""+r.$viewValue+" is not a valid email.");if(angular.isArray(r.$error.email))return e.notify_error(""+r.$error.email[0].$viewValue+" is not a valid email.");break;case"url":if(r.$error.url===!0)return e.notify_error(""+r.$viewValue+" is not a valid url.");if(angular.isArray(r.$error.url))return e.notify_error(""+r.$error.url[0].$viewValue+" is not a valid url.")}})}))},t=function(){return e.submitted=!1},t()}]),angular.module("dashboard").controller("DashboardFreelancerNotificationsCtrl",["$scope","User",function(e,r){return r.clear_notifications(e.current_user.id)}]),angular.module("dashboard").controller("DashboardFreelancerProfileCtrl",["$scope","job_categories","$rootScope",function(e,r,t){var o,n;return e.$watch("current_user.job_title",function(o){return angular.forEach(e.jobTitles,function(e,n){return angular.forEach(e,function(e){return angular.equals(o,e)?angular.forEach(r,function(e){return angular.equals(e.name,n)?(console.log(e),t.current_user.job_category_id=e.id):void 0}):void 0})})}),e.select2Options={width:290},e.$on("fileupload:add",function(r,t){return e.$apply(function(){switch(t.id){case"avatar-uploader":return e.avatar_upload_state="Uploading...";case"portfolio-uploader":return e.portfolio_upload_state="Uploading..."}})}),e.$on("fileupload:done",function(r,o){var n,i,a,u;return n=null!=(i=o.data.result)?null!=(a=i.data)?null!=(u=a.content)?u.url:void 0:void 0:void 0,null!=n?e.$apply(function(){switch(o.id){case"avatar-uploader":return e.avatar_upload_state="",t.current_user.photo_url=n,t.current_user.put().then(function(){return e.notify_success("New profile picture saved."),e.$apply()},function(){return e.notify_error("Unable to change profile picture")});case"portfolio-uploader":return e.portfolio_upload_state="",t.current_user.portfolio_images.push({url:n})}}):void 0}),e.$on("fileupload:failed",function(){return e.avatar_upload_state="",e.portfolio_upload_state="",e.notify_error("Upload failed",!1)}),e.hasError=function(r){return!r.$valid&&(r.$dirty||e.submitted)},o=function(e){var r,t;return e?(r=e.match(/[^0-9][a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*[@][a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*[.][a-zA-Z]{2,4}/),t=e.match(/\d{7}/),r||t):!1},e.submitForm=function(){return e.submitted=!0,null===t.current_user.job_category_id?e.notify_error("Please select your job title from the list."):e.form.$valid?(e.clear_notifications(),o(e.current_user.other_information)?e.notify_info('Phone number or email is not allowed in "Extra Information" section'):t.current_user.put().then(function(r){return t.current_user=r,e.redirect_to("freelancers.show/"+r.id,{success:"Your profile is updated successfully"})},function(){return window.scrollTo(0,0),e.notify_error("Form has missing or invalid values")})):(window.scrollTo(0,0),angular.forEach(e.form.$error,function(r,t){return angular.forEach(r,function(r){var o;switch(t){case"required":if(r.$error.required===!0)return e.notify_error(""+(null!=(o=r.$name)?o.humanize():void 0)+" is missing.");if(angular.isArray(r.$error.required))return e.notify_error(""+r.$error.required[0].$name.humanize()+" is missing");break;case"email":if(r.$error.email===!0)return e.notify_error(""+r.$viewValue+" is not a valid email.");if(angular.isArray(r.$error.email))return e.notify_error(""+r.$error.email[0].$viewValue+" is not a valid email.");break;case"url":if(r.$error.url===!0)return e.notify_error(""+r.$viewValue+" is not a valid url.");if(angular.isArray(r.$error.url))return e.notify_error(""+r.$error.url[0].$viewValue+" is not a valid url.")}})}))},e.removePortfolio=function(e){return t.current_user.portfolios.splice(e,1)},e.removePortfolioImage=function(e){return t.current_user.portfolio_images.splice(e,1)},e.addPortfolio=function(){return console.log(t.current_user.portfolios),t.current_user.portfolios.push({name:"",url:"",description:""}),console.log(t.current_user.portfolios)},n=function(){var o,n;return e.submitted=!1,e.job_categories=r,e.jobTitles={Writing:_.uniq(["Copywriter","Editor","Journalist","Scriptwriter","Writer"]),Design:_.uniq(["Art Director","Audio Designer","Character Designer","Creative Director","Game Designer","Graphic Designer","Lighting Designer","Motion Graphic Designer","Multimedia Designer","Product Designer","Set Designer","UI/UX Designer","Wardrode Designer","Web Designer"]),Production:_.uniq(["2D Animator","3D Animator","3D Artist","Animator","Audio Producer","Camera Assistant","Cameraman","Casting Manager","DI Artist","Director","Director and Producer","Director of Photography","Grip & Gaffer","Illustrator","Lightingman","Location Manager","Make Up Artist","Musician","Photographer","Production Assistant","Production Manager","Project Manager","Soundman","Storyboard Artist","VFX Artist","Video Editor","Video Producer","Videographer","Videographer and SteadiCam Operator"]),Others:_.uniq(["Commentator","Host","Marketing","PR","Social Media Consultant","Translator","Voiceover Artist","Web Developer"])},!(null!=(o=t.current_user.portfolios)?o.length:void 0)>0&&(t.current_user.portfolios=[]),!(null!=(n=t.current_user.portfolio_images)?n.length:void 0)>0?t.current_user.portfolio_images=[]:void 0},n()}]),angular.module("dashboard").controller("DashboardMessagesCtrl",["$scope","Message","$rootScope","$route","recipient",function(e,r,t,o,n){var i;return e.sender=t.current_user,e.recipient=n,e.sent_messages_query={order:"created_at DESC",conditions:{recipient_id:n.id,sender_id:t.current_user.id}},e.received_messages_query={order:"created_at DESC",conditions:{recipient_id:t.current_user.id,sender_id:n.id}},e.populateSentMessagesThenReceivedMessages=function(){return r.all(e.sent_messages_query).then(function(r){return e.sent_messages=r,e.populateReceivedMessagesThenJoin()},function(){return e.notify_error("Unable to fetch result from server")})},e.populateReceivedMessagesThenJoin=function(){return r.all(e.received_messages_query).then(function(r){return e.received_messages=r,e.joinMessages()},function(){return e.notify_error("Unable to fetch result from server")})},e.joinMessages=function(){var r;return r=e.received_messages.concat(e.sent_messages),r=_.sortBy(r,function(e){return e.updated_at}),e.messages=r.reverse()},e.$on("repull_messages",function(){return e.populateSentMessagesThenReceivedMessages()}),i=function(){return e.populateSentMessagesThenReceivedMessages()},i()}]),angular.module("dashboard").config(["$routeProvider","WardenProvider",function(e,r){return r.simplify(e).set_template_prefix("views/dashboard").require_user().omit_controller().when("dashboard.employer").when("dashboard.threads").when("dashboard.messages/:id",{resolves:["recipient"],omitController:!1}).when("dashboard.employer.notifications",{omitController:!1}).when("dashboard.employer.completed_projects").when("dashboard.employer.pending_projects").when("dashboard.employer.active_projects").when("dashboard.employer.profile",{omitController:!1}).when("dashboard.create_project").when("dashboard.edit_project/:id").when("dashboard.freelancer").when("dashboard.freelancer.notifications",{omitController:!1}).when("dashboard.freelancer.offered_projects").when("dashboard.freelancer.bid_projects").when("dashboard.freelancer.active_projects").when("dashboard.freelancer.completed_projects").when("dashboard.freelancer.profile",{omitController:!1,resolves:["job_categories"]})}]),angular.module("dashboard").directive("employerActiveProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/employer.active_projects.html"}}]),angular.module("dashboard").directive("employerCompletedProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/employer.completed_projects.html"}}]),angular.module("dashboard").directive("employerPendingProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/employer.pending_projects.html",controller:["$scope",function(e){return e.fulfillBid=function(e,r){return console.log(r)}}]}}]),angular.module("dashboard").directive("freelancerActiveProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/freelancer.active_projects.html"}}]),angular.module("dashboard").directive("freelancerBidProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/freelancer.bid_projects.html"}}]),angular.module("dashboard").directive("freelancerCompletedProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/freelancer.completed_projects.html"}}]),angular.module("dashboard").directive("freelancerOfferedProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/freelancer.offered_projects.html"}}]),angular.module("dashboard").directive("messageThreads",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/message_threads.html",controller:["$scope","$rootScope","Message",function(e,r,t){var o;return o=t.get_threads(r.current_user.id),o.then(function(r){return console.log(r),e.threads=r})}]}}]),angular.module("platform").directive("messageForm",[function(){return{restrict:"EA",replace:!0,scope:{sender:"=",recipient:"="},templateUrl:"forms/dashboard/message.form.html",controller:["$scope","$rootScope","$routeParams","FormHandler","Message","$q",function(e,r,t,o,n){var i,a;return a=function(){var t,o;return t=n.create(e.form_object,{notify_success:!1}),o="Message has been sent",t.then(function(){return r.notify_success(o),e.closeForm(),e.$emit("repull_messages")},function(){return r.notify_error("Form has missing or invalid values")})},e.submitMessage=function(){return e.submitted=!0,e.form_object.content?e.form.$valid?(r.clear_notifications(),a()):o.validate(e.form.$error,!1):r.notify_error("You are sending an empty message.")},e.closeForm=function(){return e.form_object={sender_id:e.sender.id,recipient_id:e.recipient.id,content:"",message_attachments:[]}},e.$on("fileupload:add",function(){return e.$apply(function(){return e.message_attachment_state="Uploading..."})}),e.$on("fileupload:done",function(r,t){var o,n,i,a;return console.log(t),n=null!=(i=t.data.result)?i.url:void 0,o=null!=(a=t.data.result)?a.filename:void 0,console.log(n),null!=n?e.$apply(function(){return e.message_attachment_state="",e.form_object.message_attachments.push({url:n,filename:o})}):(e.message_attachment_state="",e.notify_error("Upload failed",!1))}),e.$on("fileupload:failed",function(){return e.message_attachment_state="",e.notify_error("Upload failed",!1)}),e.removeAttachment=function(r){return e.form_object.message_attachments.splice(r,1)},i=function(){return o.formify(e),e.form_object={sender_id:e.sender.id,recipient_id:e.recipient.id,content:"",message_attachments:[]}},i()}]}}]),angular.module("dashboard").directive("projectForm",[function(){return{restrict:"EA",replace:!0,scope:{type:"@",user:"="},templateUrl:"forms/dashboard/project.html",controller:["$scope","JobCategory","Project","$rootScope","$routeParams",function(e,r,t,o,n){var i;return e.hasError=function(r){return!r.$valid&&(r.$dirty||e.submitted)},e.submitForm=function(){var r,n;if(e.submitted=!0,e.form.$valid){switch(o.clear_notifications(),e.type){case"new":r=t.create(e.project,{notify_success:!1}),n="Project created successfully";break;case"edit":r=e.project.put(),n="Project updated successfully"}return r.then(function(e){return o.redirect_to("projects.show/"+e.id,{success:n})},function(){return o.notify_error("Form has missing or invalid values")})}return o.notify_error("Form has missing or invalid values")},i=function(){switch(e.submitted=!1,e.job_categories=r.all(),e.type){case"new":e.project={employer_id:e.user.id};break;case"edit":t.find(n.id).then(function(r){return e.project=r})}return e.budget_ranges=["S$0 - S$500","S$500 - S$1000","S$1000 - S$2000","S$2000 - S$3000","S$3000 - S$5000","S$5000 - S$10000"]},i()}]}}]),angular.module("pages").controller("ContactCtrl",["$scope","Mailer",function(e,r){return e.submitForm=function(){return console.log(e.contact),r.contact_us(e.contact).then(function(){return e.notify_success("Thank you for contacting us. We will get back to you shortly")})}}]),angular.module("pages").controller("HomeCtrl",["$scope","freelancers",function(e,r){return e.freelancers_start=r.slice(0,4),e.freelancers_end=r.slice(4)}]),angular.module("pages").config(["$routeProvider","WardenProvider",function(e,r){return r.simplify(e).set_template_prefix("views/pages").when("home",{resolves:["freelancers"]}).when("about",{omitController:!0}).when("services",{omitController:!0}).when("contact").when("terms",{omitController:!0}).when("privacy",{omitController:!0})}]),angular.module("pages").factory("Mailer",["Restangular","$rootScope",function(e){var r;return r=function(){function r(){}return r.prototype.contact_us=function(r){return e.all("mailer").customPOST("contact_us",{form_values:r})},r}(),new r}]),angular.module("platform").controller("FreelancersCtrl",["$scope","Freelancer","job_categories","$route","$rootScope",function(e,r,t,o,n){var i,a=this;return e.$on("search:menu",function(r,t){return t.selected===!1?(delete n.freelancers_query.conditions.job_title,e.current_job_title="All"):(n.freelancers_query.conditions.job_title=t.selected,e.current_job_title=t.selected)}),e.$on("search:input",function(e,r){return null!=r&&r.length>0?n.freelancers_query.search=r:delete n.freelancers_query.search}),this.refreshList=function(){return console.log("refreshing list"),r.count(n.freelancers_query).then(function(r){return e.total_results=r,e.total_pages=Math.ceil(r/n.freelancers_query.per_page)},function(){return e.notify_error("Unable to fetch count from server")}),r.all(n.freelancers_query).then(function(e){return n.freelancers=e},function(){return e.notify_error("Unable to fetch result from server")})},e.clearFilters=function(){return n.freelancers_query={},n.freelancers_query.search="",n.freelancers_query.page=1,n.freelancers_query.per_page=5,n.freelancers_query.conditions={profile_incomplete:!1},o.reload()},i=function(){return e.jobTitles={Writing:_.uniq(["Copywriter","Editor","Journalist","Scriptwriter","Writer"]),Design:_.uniq(["Art Director","Audio Designer","Character Designer","Creative Director","Game Designer","Graphic Designer","Lighting Designer","Motion Graphic Designer","Multimedia Designer","Product Designer","Set Designer","UI/UX Designer","Wardrode Designer","Web Designer"]),Production:_.uniq(["2D Animator","3D Animator","3D Artist","Animator","Audio Producer","Camera Assistant","Cameraman","Casting Manager","DI Artist","Director","Director and Producer","Director of Photography","Grip & Gaffer","Illustrator","Lightingman","Location Manager","Make Up Artist","Musician","Photographer","Production Assistant","Production Manager","Project Manager","Soundman","Storyboard Artist","VFX Artist","Video Editor","Video Producer","Videographer","Videographer and SteadiCam Operator"]),Others:_.uniq(["Commentator","Host","Marketing","PR","Social Media Consultant","Translator","Voiceover Artist","Web Developer"])},e.current_job_title="All",e.current_job_category="All",e.job_categories=t,n.freelancers_query||(n.freelancers_query={},n.freelancers_query.search="",n.freelancers_query.page=1,n.freelancers_query.per_page=5,n.freelancers_query.conditions={profile_incomplete:!1},n.$watch("freelancers_query",function(e,r,t){return e.page===r.page&&(t.freelancers_query.page=1),a.refreshList()},!0),n.$watch("freelancers_query.conditions.job_title",function(r){return angular.forEach(e.jobTitles,function(t,o){return angular.forEach(t,function(t){return angular.equals(r,t)?e.current_job_category=o:void 0})})})),a.refreshList()},i()}]),angular.module("platform").controller("FreelancersShowCtrl",["$scope","freelancer","Project","Review","CommonApi",function(e,r,t,o,n){return e.freelancer=r,e.offerProject=function(){return t.add_offer(e.offering_project_id,r.id).then(function(r){return console.log(r),e.notify_success("Project offered")},function(e){return console.log(e),console.log("failed 102")})},e.submitQuestionToAdmin=function(){return e.question_from_employer?n.submit_question_about_freelancer_to_admin(e.question_from_employer,r.id,e.current_user.id).then(function(){return e.notify_success("Question submitted successfully.")},function(e){return console.log(e),console.log("failed 103")}):e.notify_info("Please fill in the form..")},e.reviewFormOpened=!1,e.reviews_query={order:"created_at DESC",page:1,per_page:3,conditions:{freelancer_id:r.id,is_approved:!0}},e.all_reviews_count=o.count(),e.populateReviews=function(){return o.count(e.reviews_query).then(function(r){return e.total_review_results=r,e.total_review_pages=Math.ceil(r/e.reviews_query.per_page)},function(){return e.notify_error("Unable to fetch count from server")}),o.all(e.reviews_query).then(function(r){return e.reviews=r},function(){return e.notify_error("Unable to fetch result from server")})},e.$on("repull_reviews",function(){return e.populateReviews()}),e.$watch("reviews_query",function(r,t,o){return r.page===t.page&&(o.reviews_query.page=1),e.populateReviews()},!0)}]),angular.module("platform").controller("ProjectsCtrl",["$scope","Project","job_categories","$route","$rootScope",function(e,r,t,o,n){var i,a=this;return e.$on("search:menu",function(r,t){switch(t.name){case"job_categories":return t.selected===!1?(delete n.projects_query.conditions.job_category_id,e.current_job_category="All"):(n.projects_query.conditions.job_category_id=t.selected.id,e.current_job_category=t.selected.name);case"budget_range":return t.selected===!1?delete n.projects_query.conditions.budget_range:n.projects_query.conditions.budget_range=t.selected}}),e.$on("search:input",function(e,r){return null!=r&&r.length>0?n.projects_query.search=r:delete n.projects_query.search}),this.refreshList=function(){return r.count(n.projects_query).then(function(r){return e.total_results=r,e.total_pages=Math.ceil(r/n.projects_query.per_page)},function(){return e.notify_error("Unable to fetch count from server")}),r.all(n.projects_query).then(function(e){return n.projects=e},function(){return e.notify_error("Unable to fetch result from server")})},e.clearFilters=function(){return n.projects_query={},n.projects_query.search="",n.projects_query.page=1,n.projects_query.per_page=5,n.projects_query.conditions={project_status:"project_pending"},o.reload()},i=function(){return e.current_job_category="All",e.budget_ranges=["S$0 - S$500","S$500 - S$1000","S$1000 - S$2000","S$2000 - S$3000","S$3000 - S$5000","S$5000 - S$10000"],e.job_categories=t,n.projects_query||(n.projects_query={},n.projects_query.search="",n.projects_query.page=1,n.projects_query.per_page=5,n.projects_query.conditions={project_status:"project_pending"},n.$watch("projects_query",function(e,r){return e.page===r.page&&(n.projects_query.page=1),a.refreshList()},!0)),a.refreshList()},i()}]),angular.module("platform").controller("ProjectsShowCtrl",["$scope","project","Project",function(e,r,t){return e.project=r,e.selected_bidder_id=null,e.userEmployed=r.freelancer_id===e.current_user.id,e.userIsEmployer=r.employer_id===e.current_user.id,e.userOffered=_.contains(r.offer_ids,e.current_user.id),e.userBidded=_.contains(r.bidder_ids,e.current_user.id),e.userCanBid=!e.userEmployed&&!e.userBidded&&!e.userOffered,e.bidProject=function(){return t.add_bidder(r.id,e.current_user.id).then(function(r){return e.project=r,e.userOffered=!1,e.userBidded=!0,e.userCanBid=!1,e.notify_success("Your bid has been placed")},function(r){return console.log(r),e.notify_error("Something wrong..")})},e.deleteProject=function(){var o;return o=t.destroy(r.id,{delegate:!0}),o.then(function(){return e.redirect_to("projects",{success:"Your project is deleted"})},function(){return e.notify_error("Unable to delete this project")})},e.completeProject=function(){return t.mark_as_complete(r.id).then(function(){return e.redirect_to("projects",{success:"Your project is now completed"})},function(r){var t,o;return console.log(r),null!=(null!=(t=r.data)?t.message:void 0)?e.notify_error(null!=(o=r.data)?o.message:void 0):void 0})},e.acceptOffer=function(){return t.accept_offer(r.id,e.current_user.id).then(function(r){return e.project=r,e.userOffered=!1,e.userBidded=!1,e.userEmployed=!0,e.userCanBid=!1,e.notify_success("You accepted the offer.")},function(r){return console.log(r),e.notify_error("Something wrong...")})},e.acceptBid=function(o){return console.log(o),null===o?e.notify_error("Please select a bidder from the list"):t.accept_bid(r.id,o).then(function(r){return e.project=r,e.userOffered=!1,e.userBidded=!1,e.userCanBid=!1,e.notify_success("You accepted the bid.")},function(r){return console.log(r),e.notify_error("Something wrong...")})}}]),angular.module("fork").constant("customRatingConfig",{max:5,stateOn:null,stateOff:null}),angular.module("fork").controller("CustomRatingController",["$scope","$attrs","$parse","customRatingConfig",function(e,r,t,o){return this.maxRange=angular.isDefined(r.max)?e.$parent.$eval(r.max):o.max,this.stateOn=angular.isDefined(r.stateOn)?e.$parent.$eval(r.stateOn):o.stateOn,this.stateOff=angular.isDefined(r.stateOff)?e.$parent.$eval(r.stateOff):o.stateOff,this.createRateObjects=function(e){var r,t,o;for(r={stateOn:this.stateOn,stateOff:this.stateOff},t=0,o=e.length;o>t;)e[t]=angular.extend({index:t},r,e[t]),t++;return e},e.range=angular.isDefined(r.ratingStates)?this.createRateObjects(angular.copy(e.$parent.$eval(r.ratingStates))):this.createRateObjects(Array(this.maxRange)),e.rate=function(r){return e.readonly||e.value===r?void 0:e.value=r},e.enter=function(r){return e.readonly||(e.val=r),e.onHover({value:r})},e.reset=function(){return e.val=angular.copy(e.value),e.onLeave()},e.$watch("value",function(r){return e.val=r}),e.readonly=!1,r.readonly?e.$parent.$watch(t(r.readonly),function(r){return e.readonly=!!r}):void 0}]),angular.module("fork").directive("customRating",function(){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},controller:"CustomRatingController",templateUrl:"template/custom_rating/custom_rating.html",replace:!0}}),angular.module("platform").directive("jobCategoriesFilter",[function(){return{restrict:"E",templateUrl:"partials/platform/job_categories_filter.html",scope:{},controller:["$scope",function(e){return e.jobTitles={Writing:_.uniq(["Copywriter","Editor","Journalist","Scriptwriter","Writer"]),Design:_.uniq(["Art Director","Audio Designer","Character Designer","Creative Director","Game Designer","Graphic Designer","Lighting Designer","Motion Graphic Designer","Multimedia Designer","Product Designer","Set Designer","UI/UX Designer","Wardrode Designer","Web Designer"]),Production:_.uniq(["2D Animator","3D Animator","3D Artist","Animator","Audio Producer","Camera Assistant","Cameraman","Casting Manager","DI Artist","Director","Director and Producer","Director of Photography","Grip & Gaffer","Illustrator","Lightingman","Location Manager","Make Up Artist","Musician","Photographer","Production Assistant","Production Manager","Project Manager","Soundman","Storyboard Artist","VFX Artist","Video Editor","Video Producer","Videographer","Videographer and SteadiCam Operator"]),Others:_.uniq(["Commentator","Host","Marketing","PR","Social Media Consultant","Translator","Voiceover Artist","Web Developer"])},e.setJobTitle=function(r){return console.log(r.target.innerHTML),e.$emit("search:menu",{name:"job_title",selected:r.target.innerHTML})}}]}}]),angular.module("platform").directive("searchMenu",[function(){return{restrict:"E",templateUrl:"partials/platform/search.menu.html",scope:{name:"@",options:"@"},controller:["$scope","$parse","$attrs",function(e,r,t){var o,n,i,a,u,s,c;if(a=t.name,u=t.options,o=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w\d]*)|(?:\(\s*([\$\w][\$\w\d]*)\s*,\s*([\$\w][\$\w\d]*)\s*\)))\s+in\s+(.*)$/,!(i=u.match(o)))throw Error("Expected options in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '"+u+"'.");return e.displayFn=r(i[2]||i[1]),s=i[4]||i[6],e.valueFn=r(i[2]?i[1]:s),c=r(i[7]),e.list=function(){var r,t,o,i;for(o=c(e.$parent),i=[],r=0,t=o.length;t>r;r++)n=o[r],i.push({item:n});return i}(),console.log(a),e.select=function(r){return e.$emit("search:menu",{name:a,selected:r})}}]}}]),angular.module("platform").directive("searchInput",["$timeout",function(e){return{restrict:"A",controller:["$scope","$element",function(e,r){return e.$on("search:trigger",function(){return e.search()}),e.search=function(){return e.$emit("search:input",r.val())}}],link:function(r,t){var o;return o=null,t.keyup(function(){return e.cancel(o),o=e(function(){return r.search()},500)})}}}]),angular.module("platform").directive("searchButton",[function(){return{restrict:"A",link:function(e,r){return r.click(function(){return e.$emit("search:trigger")})}}}]),angular.module("platform").directive("reviewForm",[function(){return{restrict:"EA",replace:!0,scope:{type:"@",reviewer:"=",freelancer:"=",reviewFormOpened:"="},templateUrl:"forms/platform/review.form.html",controller:["$scope","$rootScope","$routeParams","FormHandler","Review","$q",function(e,r,t,o,n,i){var a,u;return u=function(t){var o,i;switch(e.type){case"new":e.form_object.reviewer_id=t.id,o=n.create(e.form_object,{notify_success:!1}),i="Review has been submitted";break;case"edit":o=e.form_object.put(),i="Your review is updated successfully"}return o.then(function(){return r.notify_success(i),e.closeForm(),e.$emit("repull_reviews")},function(){return r.notify_error("Form has missing or invalid values")})},e.submitReview=function(){var t;return e.submitted=!0,e.form_object.rating_1&&e.form_object.rating_2&&e.form_object.rating_3?e.form.$valid?(r.clear_notifications(),t=i.defer(),t.promise.then(u),e.reviewer?t.resolve(e.reviewer):(r.pendingLoginAction=t,alert("login"))):o.validate(e.form.$error,!1):r.notify_error("Please leave a rating for this vendor.")
},e.closeForm=function(){return e.reviewFormOpened=!1,e.form_object={reviewer_id:"",freelancer_id:e.freelancer.id,rating:0,content:""}},a=function(){switch(o.formify(e),e.type){case"new":return e.form_object={reviewer_id:"",freelancer_id:e.freelancer.id,rating:0,content:""};case"edit":return n.find(t.id).then(function(r){return e.form_object=r})}},a()}]}}]);var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("account").factory("Employer",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(e){function r(){return n=r.__super__.constructor.apply(this,arguments)}return __extends(r,e),r}(BaseModel),new o(e,r,t,"employer","employers")}]);var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("account").factory("Freelancer",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(e){function r(){return n=r.__super__.constructor.apply(this,arguments)}return __extends(r,e),r}(BaseModel),new o(e,r,t,"freelancer","freelancers")}]);var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("platform").factory("JobCategory",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(e){function r(){return n=r.__super__.constructor.apply(this,arguments)}return __extends(r,e),r}(BaseModel),new o(e,r,t,"job_category","job_categories")}]);var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("platform").factory("Message",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(r){function t(){return n=t.__super__.constructor.apply(this,arguments)}return __extends(t,r),t.prototype.get_threads=function(r){return e.all("messages").customGET("threads",{user_id:r})},t}(BaseModel),new o(e,r,t,"message","messages")}]);var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("platform").factory("Project",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(r){function t(){return n=t.__super__.constructor.apply(this,arguments)}return __extends(t,r),t.prototype.add_bidder=function(r,t){return e.one("projects",r).customPOST("add_bidder",{user_id:t})},t.prototype.add_offer=function(r,t){return e.one("projects",r).customPOST("add_offer",{user_id:t})},t.prototype.accept_offer=function(r,t){return e.one("projects",r).customPOST("accept_offer",{user_id:t})},t.prototype.accept_bid=function(r,t){return e.one("projects",r).customPOST("accept_bid",{user_id:t})},t.prototype.mark_as_complete=function(r){return e.one("projects",r).customPUT("mark_as_complete")},t}(BaseModel),new o(e,r,t,"project","projects")}]);var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("platform").factory("Review",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(e){function r(){return n=r.__super__.constructor.apply(this,arguments)}return __extends(r,e),r}(BaseModel),new o(e,r,t,"review","reviews")}]),angular.module("platform").config(["$routeProvider","WardenProvider",function(e,r){return r.simplify(e).set_template_prefix("views/platform").when("projects.show/:id",{resolves:["project"],user:!0}).when("projects",{resolves:["job_categories"]}).when("freelancers.show/:id",{resolves:["freelancer"],user:!0}).when("freelancers",{resolves:["job_categories"]})}]),resolvables.freelancer=["Freelancer","$route",function(e,r){var t;return t=r.current.params.id,e.find(t)}],resolvables.freelancers=["Freelancer",function(e){return e.all({conditions:{profile_incomplete:!1},per_page:8})}],resolvables.job_categories=["JobCategory",function(e){return e.all()}],resolvables.project=["$q","Project","$route","$rootScope",function(e,r,t,o){var n,i;return n=t.current.params.id,i=r.find(n,{delegate:!0}),i.then(function(e){return e},function(r){return o.redirect_to("projects",{error:"Project cannot be found"}),e.reject(r)})}],resolvables.recipient=["User","$route",function(e,r){var t;return t=r.current.params.id,e.find(t)}];