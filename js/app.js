"use strict";var resolvables;resolvables={},angular.module("config",[]),angular.module("common",["ui.route","config","ngMobile","ngCookies","restangular","ui.bootstrap","ui.select2"]),angular.module("account",[]),angular.module("dashboard",[]),angular.module("pages",[]),angular.module("platform",[]),angular.module("admin",[]),angular.module("app",["config","common","dashboard","account","admin","pages","platform"]),angular.element(document).ready(function(){return angular.bootstrap(document,["app"])}),angular.module("account").config(["$routeProvider","WardenProvider",function(e,t){return t.simplify(e).set_template_prefix("views/account").when("freelancer.login").when("freelancer.login.custom_provider").when("freelancer.register").when("freelancer.register.custom_provider").when("employer.login").when("employer.login.custom_provider").when("employer.register").when("employer.register.custom_provider").when("account.email_confirmation/:userId/:token",{omitView:!0}).when("account.reset_password/:userId/:token")}]),angular.module("account").controller("AccountEmailConfirmationCtrl",["$scope","$routeParams","Auth","User",function(e,t,n,r){return r.activate_with_token(t.userId,t.token).then(function(t){return e.notify_success("Your email has been verified"),n.create_session({user_type:t.user_type,auth_id:t.auth_id,auth_provider:t.auth_provider,token:t.token})},function(){return e.notify_error("We are unable to activate this account.")}),e.$on("session:created",function(t,n){return e.attemptLogin().then(function(){return e.redirect_to("dashboard."+n.user_type.toLowerCase()+".profile",{success:"Please proceed to furnish your account information"})},function(){return e.notify_error("Unable to log you in")})})}]),angular.module("account").controller("AccountResetPasswordCtrl",["$scope","$routeParams","User",function(e,t,n){return e.user={new_password:""},e.submitForm=function(){return n.reset_password_with_token(t.userId,t.token,e.user.new_password).then(function(){return e.redirect_to("home",{success:"Your password is changed successfully. Please login"})},function(){return e.notify_error("Unable to reset password. Token is invalid.")})}}]),angular.module("account").controller("EmployerLoginCtrl",["$scope","Auth","CustomProvider","$dialog","RememberMe",function(e,t,n,r,i){return e.linkedinConnect=function(){return n.connect("linkedin","Employer","employer")},e.submitForm=function(){return e.remember_me?i.set(e.user.email):i.destroy(),e.clear_notifications(),t.authenticate("Employer",e.user.email,"local",e.user.password)},e.forgotPassword=function(){return r.dialog().open("dialogs/account.forgot_password.html").then(function(e){return null!=e?t.forgot_password("Employer",e,"local"):void 0})},e.user||(e.user={}),!i.isEmpty()&&i.email?e.user.email=i.email:void 0}]),angular.module("account").controller("EmployerLoginCustomProviderCtrl",["$scope","Auth","MemoryStore",function(e,t,n){var r;return r=n.get("auth_info"),e.user=r,console.log(r),n.clear(),e.submitForm=function(){return e.clear_notifications(),t.authenticate("Employer",e.user.auth_id,e.user.auth_provider,e.user.password)},e.forgotPassword=function(){return t.forgot_password(r.user_class,r.auth_id,r.auth_provider)}}]),angular.module("account").controller("EmployerRegisterCtrl",["$scope","Auth","CustomProvider",function(e,t,n){return e.linkedinConnect=function(){return n.connect("linkedin","Employer","employer")},e.submitForm=function(){var n;return e.clear_notifications(),n={first_name:e.user.first_name,last_name:e.user.last_name,photo_url:"styles/img/profile.jpg"},t.register("Employer",e.user.email,"local",e.user.email,e.user.password,n)}}]),angular.module("account").controller("EmployerRegisterCustomProviderCtrl",["$scope","Auth","MemoryStore",function(e,t,n){var r;return r=n.get("auth_info"),console.log(r),e.user=r,n.clear(),e.submitForm=function(){return e.clear_notifications(),t.register("Employer",e.user.auth_id,e.user.auth_provider,e.user.email,e.user.password,e.user.additional_fields)}}]),angular.module("account").controller("FreelancerLoginCtrl",["$scope","Auth","CustomProvider","$dialog","RememberMe",function(e,t,n,r,i){return e.linkedinConnect=function(){return n.connect("linkedin","Freelancer","freelancer")},e.submitForm=function(){return e.remember_me?i.set(e.user.email):i.destroy(),e.clear_notifications(),t.authenticate("Freelancer",e.user.email,"local",e.user.password)},e.forgotPassword=function(){return r.dialog().open("dialogs/account.forgot_password.html").then(function(e){return null!=e?t.forgot_password("Freelancer",e,"local"):void 0})},e.user||(e.user={}),!i.isEmpty()&&i.email?e.user.email=i.email:void 0}]),angular.module("account").controller("FreelancerLoginCustomProviderCtrl",["$scope","Auth","MemoryStore",function(e,t,n){var r;return r=n.get("auth_info"),e.user=r,n.clear(),e.submitForm=function(){return e.clear_notifications(),t.authenticate("Freelancer",e.user.auth_id,e.user.auth_provider,e.user.password)},e.forgotPassword=function(){return t.forgot_password(r.user_class,r.auth_id,r.auth_provider)}}]),angular.module("account").controller("FreelancerRegisterCtrl",["$scope","Auth","CustomProvider",function(e,t,n){return e.linkedinConnect=function(){return n.connect("linkedin","Freelancer","freelancer")},e.submitForm=function(){var n;return e.clear_notifications(),n={first_name:e.user.first_name,last_name:e.user.last_name,photo_url:"styles/img/profile.jpg"},t.register("Freelancer",e.user.email,"local",e.user.email,e.user.password,n)}}]),angular.module("account").controller("FreelancerRegisterCustomProviderCtrl",["$scope","Auth","MemoryStore",function(e,t,n){var r;return r=n.get("auth_info"),console.log(r),e.user=r,n.clear(),e.submitForm=function(){return e.clear_notifications(),t.register("Freelancer",e.user.auth_id,e.user.auth_provider,e.user.email,e.user.password,e.user.additional_fields)}}]),angular.module("account").run(["$rootScope","Auth","$q","RouteSession",function(e,t,n,r){return e.logout=function(){return t.logout(),e.$broadcast("logged_out"),e.redirect_to("",{success:"You are logged out"})},e.attemptLogin=function(r){var i,o;return null==r&&(r={}),o=n.defer(),null!=e.authenticated&&e.authenticated?(e.$broadcast("user_ready"),o.resolve(e.current_user)):(i=t.user({delegate:!0}),i.then(function(t){return e.current_user=t,e.authenticated=!0,e.user_class=t.user_type,e.user_type=t.user_type.toLowerCase(),"function"==typeof r.successHandler&&r.successHandler(t),e.$broadcast("user_ready"),o.resolve(t)},function(){return e.current_user=null,e.authenticated=!1,e.user_class="User",e.user_type="guest",e.$broadcast("user_ready"),"function"==typeof r.failedHandler&&r.failedHandler(user),o.reject("user is not logged in")})),o.promise},angular.forEach(["logged_out","login:started"],function(t){return e.$on(t,function(){return e.current_user=null,e.authenticated=!1,e.user_class="User",e.user_type="guest"})}),e.$on("authenticate:success",function(t,n){return e.attemptLogin({successHandler:function(t){var i,o;return console.log(e.user_type),o=n.register?"Welcome to CreativesAtWork!":"You are logged in",r.isEmpty()?"admin"===e.user_type?e.redirect_to("admin.users"):e.redirect_to("dashboard."+t.user_type.toLowerCase()+".profile",{success:o}):(i=r.path,r.destroy(),e.redirect_to(i,{success:"You are logged in!"}))}})}),e.attemptLogin()}]);var __hasProp={}.hasOwnProperty,__extends=function(e,t){function n(){this.constructor=e}for(var r in t)__hasProp.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};angular.module("account").factory("User",["Restangular","$rootScope","$filter",function(e,t,n){var r,i;return r=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments)}return __extends(n,t),n.prototype.get_from_account=function(t,n,r){return this.before_operation({user_type:t,auth_id:n,auth_provider:r}),e.all("users").customGET("get_from_account",{user_type:t,auth_id:n,auth_provider:r})},n.prototype.authenticate_with_token=function(t){return this.before_operation({session:t}),e.all("users").customGET("authenticate_with_token",t)},n.prototype.register=function(t,n,r,i,o,a){var s;return s={user_type:t,auth_id:n,auth_provider:r,email:i,password:o,additional_fields:a},this.before_operation(s),e.all("users").customPOST("register",{},{},s)},n.prototype.authenticate=function(t,n,r,i){var o;return o={user_type:t,auth_id:n,auth_provider:r,password:i},this.before_operation(o),e.all("users").customGET("authenticate",o)},n.prototype.activate_with_token=function(t,n){var r;return r={token:n},this.before_operation(r),e.one("users",t).customGET("activate_with_token",r)},n.prototype.forgot_password=function(t,n,r){var i;return i={user_type:t,auth_id:n,auth_provider:r},this.before_operation(i),e.all("users").customPOST("forgot_password",{},{},i)},n.prototype.reset_password_with_token=function(t,n,r){var i;return i={token:n,new_password:r},console.log(i),this.before_operation(i),e.one("users",t).customPOST("reset_password_with_token",{},{},i)},n.prototype.clear_notifications=function(t){return e.one("users",t).customPOST("clear_notifications",{},{})},n}(BaseModel),new r(e,t,n,"user","users")}]),resolvables.admin=["Auth","$q","$rootScope",function(e,t,n){var r;return r=e.user({delegate:!0}),r.then(function(e){return n.current_user=e,n.authenticated=!0,n.user_class=e.user_type,n.user_type=e.user_type.toLowerCase(),"admin"===n.user_type?e:(n.notify_error("Please login as admin",!1),t.reject("Access not allowed"))},function(){return n.current_user=null,n.authenticated=!1,n.user_class="User",n.user_type="guest",n.notify_error("Please login first",!1),t.reject("Access not allowed")})}],resolvables.current_user=["Auth","$q","$rootScope","$location","RouteSession",function(e,t,n,r,i){var o;return o=e.user({delegate:!0}),o.then(function(e){return n.current_user=e,n.authenticated=!0,n.user_class=e.user_type,n.user_type=e.user_type.toLowerCase(),e},function(){return n.current_user=null,n.authenticated=!1,n.user_class="User",n.user_type="guest",n.notify_error("Please login first",!1),i.set(r.path()),r.path("home"),t.reject("Access not allowed")})}],angular.module("account").service("Auth",["$rootScope","$http","ErrorProcessor","Session","User","$q",function(e,t,n,r,i,o){return this.create_session=function(n){return r.set(n.user_type,n.auth_id,n.auth_provider,n.token),t.defaults.headers.common["User-Authorization"]=r.as_json(),console.log(n),e.$broadcast("session:created",n)},this.user=function(e){var t;return null==e&&(e={}),r.isEmpty()?o.reject("Session does not exist"):(t=this.authenticate_with_token(r.attributes()),null!=e.delegate&&e.delegate?t:t.then(function(e){return e},function(e){return n.process_login(e)}))},this.register=function(t,r,o,a,s,u){var c=this;return i.register(t,r,o,a,s,u).then(function(n){return n.email_confirmation?e.notify_info("An email has been sent to verify your email address."):c.authenticate(t,r,o,s,!0)},function(e){return console.log(e),n.process_registration(e)})},this.authenticate=function(t,o,a,s,u,c){var l=this;return null==s&&(s=null),null==u&&(u=!1),null==c&&(c={}),r.destroy(),e.$broadcast("login:started"),i.authenticate(t,o,a,s).then(function(t){return l.create_session(t),e.$broadcast("authenticate:success",{authenticated:t,register:u}),"function"==typeof c.successHandler?c.successHandler(t):void 0},function(e){return n.process_login(e),"function"==typeof c.errorHandler?c.errorHandler(e):void 0})},this.authenticate_with_token=function(e){return i.authenticate_with_token(e)},this.logout=function(){return r.destroy()},this.forgot_password=function(t,r,o,a){return null==a&&(a={}),i.forgot_password(t,r,o).then(function(t){return e.notify_success("An email has been sent to you to reset your password"),"function"==typeof a.successHandler?a.successHandler(t):void 0},function(e){return console.log(e),n.process_forgot_password(e),"function"==typeof a.errorHandler?a.errorHandler(e):void 0})},this}]),angular.module("account").factory("CustomProvider",["Auth","User","$rootScope","MemoryStore","$timeout",function(e,t,n,r,i){var o;return o=function(){function e(){}var o,a,s,u;return a=function(){return n.notify_error("You need to authorize this app in order to log in")},o=function(e){return i(function(){var i;return i=t.get_from_account(e.user_class,e.auth_id,e.auth_provider),i.then(function(){return r.set("auth_info",e),n.redirect_to(""+e.user_type+".login.custom_provider")},function(){return r.set("auth_info",e),n.redirect_to(""+e.user_type+".register.custom_provider")})},100)},s=function(e,t,n){return e.authResponse?FB.api("/me",function(e){var r;return o({user_class:t,user_type:n,auth_id:e.id,auth_provider:"facebook",email:e.email,additional_fields:{first_name:e.first_name,last_name:e.last_name,location:null!=(r=e.location)?r.name:void 0,photo_url:"http://graph.facebook.com/"+e.id+"/picture"}})}):a()},u=function(e,t){return IN.API.Profile("me").fields("id","email-address","first-name","last-name","location","summary","specialties","positions","picture-url","public-profile-url","skills","certifications","educations","date-of-birth","three-current-positions").result(function(n){var r,i,a,s,u,c,l,f;return r={user_class:e,user_type:t,auth_id:n.values[0].emailAddress,auth_provider:"linkedin",email:n.values[0].emailAddress,additional_fields:{first_name:n.values[0].firstName,last_name:n.values[0].lastName,photo_url:n.values[0].pictureUrl,location:null!=(i=n.values[0].location)?i.name:void 0}},"freelancer"===t&&(r.additional_fields.job_title=null!=(a=n.values[0].threeCurrentPositions)?null!=(s=a.values)?null!=(u=s[0])?u.title:void 0:void 0:void 0,r.additional_fields.professional_history=null!=(c=n.values[0].threeCurrentPositions)?null!=(l=c.values)?null!=(f=l[0])?f.summary:void 0:void 0:void 0,r.additional_fields.other_information=n.values[0].summary),IN.API.Raw("/people/~/picture-urls::(original)").result(function(e){return r.additional_fields.photo_url=e.values[0]}),o(r)})},e.prototype.connect=function(e,t,r){return n.start_ajax(),i(function(){var n;switch(e){case"facebook":return FB.login(function(e){return s(e,t,r)},{scope:"email, user_about_me, user_location, publish_actions"});case"linkedin":return(null!=(n=IN.User)?n.isAuthorized():void 0)?u(t,r):(IN.User.authorize(),IN.Event.on(IN,"auth",function(){return u(t,r)}))}},100)},e}(),new o}]),angular.module("account").factory("RememberMe",["$cookieStore",function(e){var t;return t=function(){function t(){this._init()}return t.prototype._init=function(){var t;return t=e.get("RememberMe"),this.email=null!=t?t.email:void 0},t.prototype.attributes=function(){return{email:this.email}},t.prototype.set=function(t){return this.email=t,e.put("RememberMe",this.attributes())},t.prototype.destroy=function(){return this.email=null,e.remove("RememberMe")},t.prototype.as_json=function(){return JSON.stringify(this.attributes())},t.prototype.isEmpty=function(){return"{}"===this.as_json()},t}(),new t}]),angular.module("account").factory("Session",["$cookieStore",function(e){var t;return t=function(){function t(){this._init()}return t.prototype._init=function(){var t;return t=e.get("AuthSession"),this.user_type=null!=t?t.user_type:void 0,this.auth_id=null!=t?t.auth_id:void 0,this.auth_provider=null!=t?t.auth_provider:void 0,this.token=null!=t?t.token:void 0},t.prototype.attributes=function(){return{user_type:this.user_type,auth_id:this.auth_id,auth_provider:this.auth_provider,token:this.token}},t.prototype.set=function(t,n,r,i){return this.user_type=t,this.auth_id=n,this.auth_provider=r,this.token=i,e.put("AuthSession",this.attributes())},t.prototype.destroy=function(){return this.user_type=null,this.auth_id=null,this.auth_provider=null,this.token=null,e.remove("AuthSession")},t.prototype.as_json=function(){return JSON.stringify(this.attributes())},t.prototype.isEmpty=function(){return"{}"===this.as_json()},t}(),new t}]),angular.module("admin").config(["$routeProvider","WardenProvider",function(e,t){return t.simplify(e).require_admin().set_template_prefix("views/admin").when("admin.login",{omitController:!0,admin:!1}).when("admin.users",{resolves:["job_categories"]}).when("admin.employers")}]),angular.module("admin").controller("AdminEmployersCtrl",["$scope","Employer","$route","ServiceEndpoint",function(e,t,n,r){var i,o=this;return e.svcEndpoint=r,this.refreshList=function(){return t.count(e.query).then(function(t){return e.total_results=t,e.total_pages=Math.ceil(t/e.query.per_page)},function(){return e.notify_error("Unable to fetch count from server")}),t.all(e.query).then(function(t){return e.employers=t},function(){return e.notify_error("Unable to fetch result from server")})},e.clearFilters=function(){return n.reload()},i=function(){return e.query={},e.query.search="",e.query.page=1,e.query.order="first_name ASC",e.query.per_page=15,e.$watch("query",function(e,t,n){return e.page===t.page&&(n.query.page=1),o.refreshList()},!0),o.refreshList()},i()}]),angular.module("admin").controller("AdminUsersCtrl",["$scope","Freelancer","job_categories","$route","ServiceEndpoint",function(e,t,n,r,i){var o,a=this;return e.svcEndpoint=i,e.$watch("query.conditions.job_title",function(t){return angular.forEach(e.jobTitles,function(n,r){return angular.forEach(n,function(n){return angular.equals(t,n)?e.current_job_category=r:void 0})})}),e.$on("search:menu",function(t,n){return n.selected===!1?(delete e.query.conditions.job_title,e.current_job_title="All"):(e.query.conditions.job_title=n.selected,e.current_job_title=n.selected)}),e.$on("search:input",function(t,n){return null!=n&&n.length>0?e.query.search=n:delete e.query.search}),this.refreshList=function(){return t.count(e.query).then(function(t){return e.total_results=t,e.total_pages=Math.ceil(t/e.query.per_page)},function(){return e.notify_error("Unable to fetch count from server")}),t.all(e.query).then(function(t){return e.freelancers=t},function(){return e.notify_error("Unable to fetch result from server")})},e.clearFilters=function(){return r.reload()},o=function(){return e.jobTitles={Writing:_.uniq(["Copywriter","Editor","Journalist","Scriptwriter","Writer"]),Design:_.uniq(["Art Director","Audio Designer","Character Designer","Creative Director","Game Designer","Graphic Designer","Lighting Designer","Motion Graphic Designer","Multimedia Designer","Product Designer","Set Designer","UI/UX Designer","Wardrode Designer","Web Designer"]),Production:_.uniq(["2D Animator","3D Animator","3D Artist","Animator","Audio Producer","Camera Assistant","Cameraman","Casting Manager","DI Artist","Director","Director and Producer","Director of Photography","Grip & Gaffer","Illustrator","Lightingman","Location Manager","Make Up Artist","Musician","Photographer","Production Assistant","Production Manager","Project Manager","Soundman","Storyboard Artist","VFX Artist","Video Editor","Video Producer","Videographer","Videographer and SteadiCam Operator"]),Others:_.uniq(["Commentator","Host","Marketing","PR","Social Media Consultant","Translator","Voiceover Artist","Web Developer"])},e.current_job_title="All",e.current_job_category="All",e.query={},e.query.search="",e.query.page=1,e.query.order="first_name ASC",e.query.per_page=15,e.job_categories=n,e.$watch("query",function(e,t,n){return e.page===t.page&&(n.query.page=1),a.refreshList()},!0),a.refreshList()},o()}]),angular.module("admin").directive("adminDashboardSidebar",[function(){return{restrict:"EA",replace:!0,templateUrl:"partials/admin/admin_dashboard_sidebar.html"}}]),angular.module("admin").directive("adminLoginForm",[function(){return{restrict:"EA",replace:!0,scope:{},templateUrl:"forms/admin/login.form.html",controller:["$scope","$rootScope","$routeParams","Auth",function(e,t,n,r){var i;return e.hasError=function(t){return!t.$valid&&(t.$dirty||e.submitted)},e.login=function(){return e.submitted=!0,e.form.$valid?(t.clear_notifications(),r.authenticate("Admin",e.user.email,"local",e.user.password)):void 0},e.submitted=!1,i=function(){return t.authenticated?t.redirect_to("admin.users",{info:"You have already logged in"}):void 0},t.$on("user_ready",i)}]}}]),angular.module("account").config(["$routeProvider","$locationProvider",function(e,t){return e.otherwise({redirectTo:"/home"}),t.html5Mode(!1)}]),angular.module("common").config(["$dialogProvider",function(e){return e.options({backdrop:!0,dialogClass:"modal",backdropClass:"modal-backdrop",transitionClass:"fade",triggerClass:"in",dialogOpenClass:"modal-open",backdropFade:!0,dialogFade:!0,keyboard:!0,backdropClick:!0,controller:["$scope","dialog",function(e,t){return e.close=function(e){return t.close(e)}}]})}]),angular.module("common").config(["$httpProvider",function(e){var t;return t=["$q","$injector","$rootScope",function(e,t,n){var r,i;return i=function(e){var r;return r=t.get("$http"),1>r.pendingRequests.length&&n.$broadcast("ajax_loading:stopped"),e},r=function(r){var i;return i=t.get("$http"),1>i.pendingRequests.length&&n.$broadcast("ajax_loading:stopped"),e.reject(r)},function(e){return n.$broadcast("ajax_loading:started"),e.then(i,r)}}],e.responseInterceptors.push(t)}]),angular.module("common").config(["RestangularProvider","ServiceEndpoint",function(e,t){return e.setBaseUrl(t),e.setListTypeIsArray(!0),e.setFullRequestInterceptor(function(e,t,n,r,i,o){var a,s,u,c;if(null!=(null!=e?e._deny_fields:void 0))for(c=e._deny_fields,s=0,u=c.length;u>s;s++)a=c[s],delete e[a];return{element:e,operation:t,route:n,url:r,headers:i,params:o}}),e.setResponseExtractor(function(e){return e})}]),angular.module("common").directive("alerter",[function(){return{restrict:"E",replace:!0,scope:{closeCountDown:"@"},controller:["$scope","$timeout",function(e,t){var n,r;return e.alerts=[],r={dir1:"down",dir2:"left",push:"top",spacing1:25,spacing2:25,firstpos1:125,firstpos2:25},n=null,$.pnotify.defaults.history=!1,e.addAlert=function(i,o){var a,s,u;return s=function(){var t,n,r,i;for(r=e.alerts,i=[],t=0,n=r.length;n>t;t++)a=r[t],i.push(a.msg);return i}(),s.indexOf(o)>=0?void 0:(e.alerts.push({type:i,msg:o}),$.pnotify({text:o,type:i,stack:r}),null!=n&&t.cancel(n),u=3e3,angular.isDefined(e.closeCountDown)&&(u=e.closeCountDown),n=t(function(){return e.clearAlerts()},u))},e.clearAlerts=function(){return e.alerts=[],$.pnotify_remove_all()},e.$on("notification:info",function(t,n){return e.addAlert("info",n)}),e.$on("notification:success",function(t,n){return e.addAlert("success",n)}),e.$on("notification:error",function(t,n){return e.addAlert("error",n)}),e.$on("notification:clear",function(){return e.clearAlerts()})}]}}]),angular.module("common").directive("fileupload",[function(){return{restrict:"A",scope:{uploaderId:"@",serverDomain:"@",servicePath:"@"},link:function(e,t,n){var r;return r={url:""+n.serverDomain+"/"+n.servicePath,dataType:"json",add:function(t,r){return e.$emit("fileupload:add",{id:n.uploaderId,domain:n.serverDomain,path:n.servicePath,data:r}),r.submit()},done:function(t,r){return e.$emit("fileupload:done",{id:n.uploaderId,domain:n.serverDomain,path:n.servicePath,data:r})},progress:function(t,r){return e.$emit("fileupload:progress",{id:n.uploaderId,domain:n.serverDomain,path:n.servicePath,data:r})},fail:function(t,r){return e.$emit("fileupload:fail",{id:n.uploaderId,domain:n.serverDomain,path:n.servicePath,data:r})}},t.fileupload(r)}}}]),angular.module("common").directive("nailthumb",[function(){return{restrict:"A",scope:{method:"@",width:"@",height:"@",replaceAnimation:"@",ngSrc:"@"},link:function(e,t,n){var r;return r={method:"crop",width:"125",height:"125",replaceAnimation:"fade"},null!=n.method&&(r.method=n.method),null!=n.width&&(r.width=n.width),null!=n.height&&(r.height=n.height),null!=n.replaceAnimation&&(r.replaceAnimation=n.replaceAnimation),n.$observe("ngSrc",function(){return t.nailthumb(r)})}}}]),angular.module("common").directive("passwordVerify",function(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(e,t,n,r){return e.$watch(function(){var t;return t=void 0,(e.passwordVerify||r.$viewValue)&&(t=e.passwordVerify+"_"+r.$viewValue),t},function(t){return t?r.$parsers.unshift(function(t){var n;return n=e.passwordVerify,n!==t?(r.$setValidity("passwordVerify",!1),void 0):(r.$setValidity("passwordVerify",!0),t)}):void 0})}}}),angular.module("common").directive("spinner",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/common/spinner.html",controller:["$scope",function(e){return e.$on("ajax_loading:started",function(){return e.isLoading=!0}),e.$on("ajax_loading:stopped",function(){return e.isLoading=!1})}],link:function(){var e,t;return e={lines:12,length:7,width:5,radius:10,color:"#fff",speed:1,trail:66,shadow:!0,left:"78px",top:"78px"},t=document.getElementById("spin"),new Spinner(e).spin(t)}}}]),angular.module("common").directive("tagsinput",[function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){var i,o,a;if(r)return i=!1,o={onChange:function(){return a()}},a=function(){return r.$setViewValue(t.val())},r.$render=function(){return angular.isString(r.$viewValue)&&(t.val(r.$viewValue),t.attr("value",r.$viewValue)),i?void 0:(t.tagsInput(o),i=!0)}}}}]),angular.module("common").run(["$rootScope",function(e){return e.start_ajax=function(){return e.$broadcast("ajax_loading:started")},e.stop_ajax=function(){return e.$broadcast("ajax_loading:stopped")}}]),angular.module("common").run(["$rootScope","$location",function(e,t){return e.$on("$routeChangeSuccess",function(){return ga("send","pageview",t.path()),console.log(t.path())})}]),angular.module("common").run(["$rootScope","$log",function(e,t){return e.alert=function(e){return alert(e)},e.log=function(e){return t.log(e)},e.warn=function(e){return t.warn(e)},e.error=function(e){return t.error(e)}}]),angular.module("common").run(["$rootScope",function(e){return e.notify_info=function(t,n){return null==n&&(n=!1),n||e.$broadcast("notification:clear"),e.$broadcast("notification:info",t)},e.notify_error=function(t,n){return null==n&&(n=!0),n||e.$broadcast("notification:clear"),e.$broadcast("notification:error",t)},e.notify_success=function(t,n){return null==n&&(n=!1),n||e.$broadcast("notification:clear"),e.$broadcast("notification:success",t)},e.clear_notifications=function(){return e.$broadcast("notification:clear")}}]),angular.module("common").run(["$rootScope","$location",function(e,t){return e.redirect_to=function(n,r){return null==r&&(r={}),n=n.replace(/^\//,""),null!=r.success&&e.notify_success(r.success),null!=r.info&&e.notify_info(r.info),null!=r.error&&e.notify_error(r.error),t.path("/"+n)}}]),angular.module("common").run(["$rootScope","$location",function(e,t){return e.$current_route="/",e.$on("$routeChangeSuccess",function(){return e.$current_route=t.path()})}]),angular.module("common").filter("inflector",function(){var e,t,n;return n=function(e){return e.replace(/^([a-z])|\s+([a-z])/g,function(e){return e.toUpperCase()})},e=function(e,t){return e.replace(/[A-Z]/g,function(e){return t+e})},t={humanize:function(t){return n(e(t," ").split("_").join(" "))},underscore:function(t){return t.substr(0,1).toLowerCase()+e(t.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(e){return e=e.substr(0,1).toLowerCase()+n(e.split("_").join(" ")).substr(1).split(" ").join("")}},function(e,n){return n!==!1&&angular.isString(e)?(n=n||"humanize",t[n](e)):e}});var BaseModel;BaseModel=function(){function e(e,t,n,r,i){this.Restangular=e,this.$rootScope=t,this.$filter=n,this.singularName=r,this.pluralName=i,this.humanizedSingularName=this.$filter("inflector")(this.singularName,"humanize"),this.humanizedPluralName=this.$filter("inflector")(this.pluralName,"humanize")}return e.prototype.before_operation=function(){return this.$rootScope.$broadcast("ajax_loading:started")},e.prototype.operation_success=function(){return this.$rootScope.$broadcast("ajax_loading:stopped")},e.prototype.operation_failed=function(){return this.$rootScope.$broadcast("ajax_loading:stopped")},e.prototype.create=function(e,t){var n,r,i=this;return null==t&&(t={}),this.before_operation({model:e,options:t}),r=this.Restangular.all(this.pluralName).post(e),null!=t.delegate&&t.delegate?r:(n={notify_success:!0,notify_error:!0},null!=t.notify_success&&(n.notify_success=t.notify_success),null!=t.notify_error&&(n.notify_error=t.notify_error),r.then(function(e){return i.operation_success({item:e}),n.notify_success&&i.$rootScope.notify_success(""+i.humanizedSingularName+" created successfully"),e},function(r){return i.operation_failed({response:r,model:e,options:t}),n.notify_error&&i.$rootScope.notify_error("Failed to create "+i.humanizedSingularName),console.log("@create error: "),console.log(r)}))},e.prototype.count=function(e){var t,n,r=this;return null==e&&(e={}),this.before_operation({options:e}),n={},null!=e.conditions&&(n.conditions=JSON.stringify(e.conditions)),null!=e.search&&(n.search=e.search),t=this.Restangular.all(this.pluralName).customGET("count",n),null!=e.delegate&&e.delegate?t:t.then(function(e){return r.operation_success({count:e}),e},function(t){return r.operation_failed({response:t,options:e}),console.log("@count error:"),console.log(t)})},e.prototype.all=function(e){var t,n,r=this;return null==e&&(e={}),this.before_operation({options:e}),n={limit:1e3,offset:0,order:"created_at DESC",page:1,per_page:100},null!=e.limit&&(n.limit=e.limit),null!=e.offset&&(n.offset=e.offset),null!=e.order&&(n.order=e.order),null!=e.page&&(n.page=e.page),null!=e.per_page&&(n.per_page=e.per_page),null!=e.includes&&(n.includes=JSON.stringify(e.includes)),null!=e.conditions&&(n.conditions=JSON.stringify(e.conditions)),null!=e.search&&(n.search=e.search),t=this.Restangular.all(this.pluralName).getList(n),null!=e.delegate&&e.delegate?t:t.then(function(e){return r.operation_success({list:e}),e},function(t){return r.operation_failed({response:t,options:e}),console.log("@all error:"),console.log(t)})},e.prototype.find=function(e,t){var n,r,i=this;return null==t&&(t={}),this.before_operation({id:e,options:t}),r={},null!=t.includes&&(r.includes=JSON.stringify(t.includes)),n=this.Restangular.one(this.pluralName,e).get(r),null!=t.delegate&&t.delegate?n:n.then(function(e){return i.operation_success({item:e}),e},function(e){return i.operation_failed({response:e}),i.$rootScope.notify_error("Unable to find "+i.humanizedSingularName),console.log("@find error"),console.log(e)})},e.prototype.destroy=function(e,t){var n,r=this;return null==t&&(t={}),this.before_operation({id:e,options:t}),console.log(e),console.log(this.Restangular.one(this.pluralName,e).remove),n=this.Restangular.one(this.pluralName,e).remove(),null!=t.delegate&&t.delegate?n:n.then(function(e){return r.operation_success({item:e})},function(e){return r.operation_failed({response:e}),r.$rootScope.notify_error("Unable to delete "+r.humanizedSingularName),console.log("@destroy error"),console.log(e)})},e}();var __hasProp={}.hasOwnProperty,__extends=function(e,t){function n(){this.constructor=e}for(var r in t)__hasProp.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};angular.module("common").factory("CommonApi",["Restangular","$rootScope","$filter",function(e,t,n){var r,i;return r=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments)}return __extends(n,t),n.prototype.submit_question_about_freelancer_to_admin=function(t,n,r){return e.all("common").customPOST("submit_question_about_freelancer_to_admin",{question:t,freelancer_id:n,employer_id:r})},n}(BaseModel),new r(e,t,n,"common","common")}]),angular.module("common").provider("Warden",function(){var e;return e=function(){function e(){}return e.prototype.$get=function(){},e.prototype.simplify=function(e){return this.routeProvider=e,this.requireUser=!1,this.requireAdmin=!1,this.omitView=!1,this.omitController=!1,this},e.prototype.set_template_prefix=function(e){return this.templatePrefix=e,"/"!==e.slice(-1)&&(this.templatePrefix+="/"),this},e.prototype.require_user=function(){return this.requireUser=!0,this},e.prototype.require_admin=function(){return this.requireAdmin=!0,this},e.prototype.omit_view=function(){return this.omitView=!0,this
},e.prototype.omit_controller=function(){return this.omitController=!0,this},e.prototype.when=function(e,t){var n,r,i,o,a,s,u,c,l,f,p,d;if(null==t&&(t={}),"/"===e.slice(0,1)&&(e=e.slice(1)),n=e.split("/")[0],i=function(){var e,t,r,i;for(r=n.split(/\.|_/),i=[],e=0,t=r.length;t>e;e++)c=r[e],i.push(c.capitalize());return i}(),s=t.route||"/"+e,r=""+i.join("")+"Ctrl",u=""+this.templatePrefix+n+".html",a={},null==t.user&&(t.user=this.requireUser),null==t.admin&&(t.admin=this.requireAdmin),null==t.omitView&&(t.omitView=this.omitView),null==t.omitController&&(t.omitController=this.omitController),t.user&&(a.current_user=resolvables.current_user),t.admin&&(a.admin=resolvables.admin),null!=t.resolves)for(d=t.resolves,f=0,p=d.length;p>f;f++)o=d[f],a[o]=resolvables[o];return t.omitView&&(u="views/pages/empty.html"),null!=t.templateUrl&&(u=t.templateUrl),l="3.2",u+="?v="+l,t.omitController?this.routeProvider.when(s,{templateUrl:u,resolve:a}):this.routeProvider.when(s,{templateUrl:u,controller:r,resolve:a}),this},e}(),new e}),angular.module("common").service("ErrorProcessor",["$rootScope","$log",function(e,t){return this.process_save=function(n,r){var i,o,a,s,u;switch(n.status){case 422:s=n.data,u=[];for(a in s)o=s[a],u.push(function(){var n,r,s;for(s=[],n=0,r=o.length;r>n;n++)i=o[n],t.error(i),s.push(e.notify_error(""+a+" "+i));return s}());return u;default:return null!=r?r():e.notify_error("Unable to save.")}},this.process_login=function(t,n){switch(t.status){case 401:if("message"in t.data)return e.notify_error(t.data.message);break;default:return null!=n?n():e.notify_error("Login failed")}},this.process_registration=function(t,n){switch(t.status){case 401:if("message"in t.data)return e.notify_error(t.data.message);break;default:return null!=n?n():e.notify_error("Registration Failed")}},this.process_forgot_password=function(t,n){switch(t.status){case 401:if("message"in t.data)return e.notify_error(t.data.message);break;default:return null!=n?n():e.notify_error("Sorry, we are unable to reset your password.")}},this}]),angular.module("common").service("MemoryStore",[function(){var e;return e={},this.set=function(t,n){return e[t]=n},this.get=function(t){return e[t]},this.del=function(t){return delete e[t]},this.inspect=function(){return e},this.clear=function(){return e={}},this}]),angular.module("account").factory("RouteSession",["$cookieStore",function(e){var t;return t=function(){function t(){this._init()}return t.prototype._init=function(){var t;return t=e.get("RouteSession"),this.path=null!=t?t.path:void 0},t.prototype.attributes=function(){return{path:this.path}},t.prototype.set=function(t){return this.path=t,e.put("RouteSession",this.attributes())},t.prototype.destroy=function(){return this.path=null,e.remove("RouteSession")},t.prototype.as_json=function(){return JSON.stringify(this.attributes())},t.prototype.isEmpty=function(){return"{}"===this.as_json()},t}(),new t}]),angular.module("config").constant("ServiceEndpoint","http://creativesatwork.me:3637"),angular.module("dashboard").controller("DashboardEmployerNotificationsCtrl",["$scope","User",function(e,t){return t.clear_notifications(e.current_user.id)}]),angular.module("dashboard").controller("DashboardEmployerProfileCtrl",["$scope","$rootScope",function(e,t){var n;return e.hasError=function(t){return!t.$valid&&(t.$dirty||e.submitted)},e.submitForm=function(){return e.submitted=!0,e.form.$valid?(e.clear_notifications(),t.current_user.put().then(function(n){return t.current_user=n,e.notify_success("Your profile is updated successfully")},function(){return window.scrollTo(0,0),e.notify_error("Form has missing or invalid values")})):(window.scrollTo(0,0),angular.forEach(e.form.$error,function(t,n){return angular.forEach(t,function(t){var r;switch(n){case"required":if(t.$error.required===!0)return e.notify_error(""+(null!=(r=t.$name)?r.humanize():void 0)+" is missing.");if(angular.isArray(t.$error.required))return e.notify_error(""+t.$error.required[0].$name.humanize()+" is missing");break;case"email":if(t.$error.email===!0)return e.notify_error(""+t.$viewValue+" is not a valid email.");if(angular.isArray(t.$error.email))return e.notify_error(""+t.$error.email[0].$viewValue+" is not a valid email.");break;case"url":if(t.$error.url===!0)return e.notify_error(""+t.$viewValue+" is not a valid url.");if(angular.isArray(t.$error.url))return e.notify_error(""+t.$error.url[0].$viewValue+" is not a valid url.")}})}))},n=function(){return e.submitted=!1},n()}]),angular.module("dashboard").controller("DashboardFreelancerNotificationsCtrl",["$scope","User",function(e,t){return t.clear_notifications(e.current_user.id)}]),angular.module("dashboard").controller("DashboardFreelancerProfileCtrl",["$scope","job_categories","$rootScope",function(e,t,n){var r,i;return e.$watch("current_user.job_title",function(r){return angular.forEach(e.jobTitles,function(e,i){return angular.forEach(e,function(e){return angular.equals(r,e)?angular.forEach(t,function(e){return angular.equals(e.name,i)?(console.log(e),n.current_user.job_category_id=e.id):void 0}):void 0})})}),e.select2Options={width:290},e.$on("fileupload:add",function(t,n){return e.$apply(function(){switch(n.id){case"avatar-uploader":return e.avatar_upload_state="Uploading...";case"portfolio-uploader":return e.portfolio_upload_state="Uploading..."}})}),e.$on("fileupload:done",function(t,r){var i,o,a,s;return i=null!=(o=r.data.result)?null!=(a=o.data)?null!=(s=a.content)?s.url:void 0:void 0:void 0,null!=i?e.$apply(function(){switch(r.id){case"avatar-uploader":return e.avatar_upload_state="",n.current_user.photo_url=i,n.current_user.put().then(function(){return e.notify_success("New profile picture saved."),e.$apply()},function(){return e.notify_error("Unable to change profile picture")});case"portfolio-uploader":return e.portfolio_upload_state="",n.current_user.portfolio_images.push({url:i})}}):void 0}),e.$on("fileupload:failed",function(){return e.avatar_upload_state="",e.portfolio_upload_state="",e.notify_error("Upload failed",!1)}),e.hasError=function(t){return!t.$valid&&(t.$dirty||e.submitted)},r=function(e){var t,n;return e?(t=e.match(/[^0-9][a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*[@][a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*[.][a-zA-Z]{2,4}/),n=e.match(/\d{7}/),t||n):!1},e.submitForm=function(){return e.submitted=!0,null===n.current_user.job_category_id?e.notify_error("Please select your job title from the list."):e.form.$valid?(e.clear_notifications(),r(e.current_user.other_information)?e.notify_info('Phone number or email is not allowed in "Extra Information" section'):n.current_user.put().then(function(t){return n.current_user=t,e.redirect_to("freelancers.show/"+t.id,{success:"Your profile is updated successfully"})},function(){return window.scrollTo(0,0),e.notify_error("Form has missing or invalid values")})):(window.scrollTo(0,0),angular.forEach(e.form.$error,function(t,n){return angular.forEach(t,function(t){var r;switch(n){case"required":if(t.$error.required===!0)return e.notify_error(""+(null!=(r=t.$name)?r.humanize():void 0)+" is missing.");if(angular.isArray(t.$error.required))return e.notify_error(""+t.$error.required[0].$name.humanize()+" is missing");break;case"email":if(t.$error.email===!0)return e.notify_error(""+t.$viewValue+" is not a valid email.");if(angular.isArray(t.$error.email))return e.notify_error(""+t.$error.email[0].$viewValue+" is not a valid email.");break;case"url":if(t.$error.url===!0)return e.notify_error(""+t.$viewValue+" is not a valid url.");if(angular.isArray(t.$error.url))return e.notify_error(""+t.$error.url[0].$viewValue+" is not a valid url.")}})}))},e.removePortfolio=function(e){return n.current_user.portfolios.splice(e,1)},e.addPortfolio=function(){return console.log(n.current_user.portfolios),n.current_user.portfolios.push({name:"",url:"",description:""}),console.log(n.current_user.portfolios)},i=function(){var r,i;return e.submitted=!1,e.job_categories=t,e.jobTitles={Writing:_.uniq(["Copywriter","Editor","Journalist","Scriptwriter","Writer"]),Design:_.uniq(["Art Director","Audio Designer","Character Designer","Creative Director","Game Designer","Graphic Designer","Lighting Designer","Motion Graphic Designer","Multimedia Designer","Product Designer","Set Designer","UI/UX Designer","Wardrode Designer","Web Designer"]),Production:_.uniq(["2D Animator","3D Animator","3D Artist","Animator","Audio Producer","Camera Assistant","Cameraman","Casting Manager","DI Artist","Director","Director and Producer","Director of Photography","Grip & Gaffer","Illustrator","Lightingman","Location Manager","Make Up Artist","Musician","Photographer","Production Assistant","Production Manager","Project Manager","Soundman","Storyboard Artist","VFX Artist","Video Editor","Video Producer","Videographer","Videographer and SteadiCam Operator"]),Others:_.uniq(["Commentator","Host","Marketing","PR","Social Media Consultant","Translator","Voiceover Artist","Web Developer"])},!(null!=(r=n.current_user.portfolios)?r.length:void 0)>0&&(n.current_user.portfolios=[]),!(null!=(i=n.current_user.portfolio_images)?i.length:void 0)>0?n.current_user.portfolio_images=[]:void 0},i()}]),angular.module("dashboard").config(["$routeProvider","WardenProvider",function(e,t){return t.simplify(e).set_template_prefix("views/dashboard").require_user().omit_controller().when("dashboard.employer").when("dashboard.employer.notifications",{omitController:!1}).when("dashboard.employer.completed_projects").when("dashboard.employer.pending_projects").when("dashboard.employer.active_projects").when("dashboard.employer.profile",{omitController:!1}).when("dashboard.create_project").when("dashboard.edit_project/:id").when("dashboard.freelancer").when("dashboard.freelancer.notifications",{omitController:!1}).when("dashboard.freelancer.offered_projects").when("dashboard.freelancer.bid_projects").when("dashboard.freelancer.active_projects").when("dashboard.freelancer.completed_projects").when("dashboard.freelancer.profile",{omitController:!1,resolves:["job_categories"]})}]),angular.module("dashboard").directive("employerActiveProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/employer.active_projects.html"}}]),angular.module("dashboard").directive("employerCompletedProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/employer.completed_projects.html"}}]),angular.module("dashboard").directive("employerPendingProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/employer.pending_projects.html",controller:["$scope",function(e){return e.fulfillBid=function(e,t){return console.log(t)}}]}}]),angular.module("dashboard").directive("freelancerActiveProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/freelancer.active_projects.html"}}]),angular.module("dashboard").directive("freelancerBidProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/freelancer.bid_projects.html"}}]),angular.module("dashboard").directive("freelancerCompletedProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/freelancer.completed_projects.html"}}]),angular.module("dashboard").directive("freelancerOfferedProjects",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/dashboard/freelancer.offered_projects.html"}}]),angular.module("dashboard").directive("projectForm",[function(){return{restrict:"EA",replace:!0,scope:{type:"@",user:"="},templateUrl:"forms/dashboard/project.html",controller:["$scope","JobCategory","Project","$rootScope","$routeParams",function(e,t,n,r,i){var o;return e.hasError=function(t){return!t.$valid&&(t.$dirty||e.submitted)},e.submitForm=function(){var t,i;if(e.submitted=!0,e.form.$valid){switch(r.clear_notifications(),e.type){case"new":t=n.create(e.project,{notify_success:!1}),i="Project created successfully";break;case"edit":t=e.project.put(),i="Project updated successfully"}return t.then(function(e){return r.redirect_to("projects.show/"+e.id,{success:i})},function(){return r.notify_error("Form has missing or invalid values")})}return r.notify_error("Form has missing or invalid values")},o=function(){switch(e.submitted=!1,e.job_categories=t.all(),e.type){case"new":e.project={employer_id:e.user.id};break;case"edit":n.find(i.id).then(function(t){return e.project=t})}return e.budget_ranges=["S$0 - S$500","S$500 - S$1000","S$1000 - S$2000","S$2000 - S$3000","S$3000 - S$5000","S$5000 - S$10000"]},o()}]}}]),angular.module("pages").controller("ContactCtrl",["$scope","Mailer",function(e,t){return e.submitForm=function(){return console.log(e.contact),t.contact_us(e.contact).then(function(){return e.notify_success("Thank you for contacting us. We will get back to you shortly")})}}]),angular.module("pages").controller("HomeCtrl",["$scope","freelancers",function(e,t){return e.freelancers_start=t.slice(0,4),e.freelancers_end=t.slice(4)}]),angular.module("pages").config(["$routeProvider","WardenProvider",function(e,t){return t.simplify(e).set_template_prefix("views/pages").when("home",{resolves:["freelancers"]}).when("about",{omitController:!0}).when("services",{omitController:!0}).when("contact").when("terms",{omitController:!0}).when("privacy",{omitController:!0})}]),angular.module("pages").factory("Mailer",["Restangular","$rootScope",function(e){var t;return t=function(){function t(){}return t.prototype.contact_us=function(t){return e.all("mailer").customPOST("contact_us",{form_values:t})},t}(),new t}]),angular.module("platform").controller("FreelancersCtrl",["$scope","Freelancer","job_categories","$route","$rootScope",function(e,t,n,r,i){var o,a=this;return e.$on("search:menu",function(t,n){return n.selected===!1?(delete i.freelancers_query.conditions.job_title,e.current_job_title="All"):(i.freelancers_query.conditions.job_title=n.selected,e.current_job_title=n.selected)}),e.$on("search:input",function(e,t){return null!=t&&t.length>0?i.freelancers_query.search=t:delete i.freelancers_query.search}),this.refreshList=function(){return console.log("refreshing list"),t.count(i.freelancers_query).then(function(t){return e.total_results=t,e.total_pages=Math.ceil(t/i.freelancers_query.per_page)},function(){return e.notify_error("Unable to fetch count from server")}),t.all(i.freelancers_query).then(function(e){return i.freelancers=e},function(){return e.notify_error("Unable to fetch result from server")})},e.clearFilters=function(){return i.freelancers_query={},i.freelancers_query.search="",i.freelancers_query.page=1,i.freelancers_query.per_page=5,i.freelancers_query.conditions={profile_incomplete:!1},r.reload()},o=function(){return e.jobTitles={Writing:_.uniq(["Copywriter","Editor","Journalist","Scriptwriter","Writer"]),Design:_.uniq(["Art Director","Audio Designer","Character Designer","Creative Director","Game Designer","Graphic Designer","Lighting Designer","Motion Graphic Designer","Multimedia Designer","Product Designer","Set Designer","UI/UX Designer","Wardrode Designer","Web Designer"]),Production:_.uniq(["2D Animator","3D Animator","3D Artist","Animator","Audio Producer","Camera Assistant","Cameraman","Casting Manager","DI Artist","Director","Director and Producer","Director of Photography","Grip & Gaffer","Illustrator","Lightingman","Location Manager","Make Up Artist","Musician","Photographer","Production Assistant","Production Manager","Project Manager","Soundman","Storyboard Artist","VFX Artist","Video Editor","Video Producer","Videographer","Videographer and SteadiCam Operator"]),Others:_.uniq(["Commentator","Host","Marketing","PR","Social Media Consultant","Translator","Voiceover Artist","Web Developer"])},e.current_job_title="All",e.current_job_category="All",e.job_categories=n,i.freelancers_query||(i.freelancers_query={},i.freelancers_query.search="",i.freelancers_query.page=1,i.freelancers_query.per_page=5,i.freelancers_query.conditions={profile_incomplete:!1},i.$watch("freelancers_query",function(e,t,n){return e.page===t.page&&(n.freelancers_query.page=1),a.refreshList()},!0),i.$watch("freelancers_query.conditions.job_title",function(t){return angular.forEach(e.jobTitles,function(n,r){return angular.forEach(n,function(n){return angular.equals(t,n)?e.current_job_category=r:void 0})})})),a.refreshList()},o()}]),angular.module("platform").controller("FreelancersShowCtrl",["$scope","freelancer","Project","CommonApi",function(e,t,n,r){return e.freelancer=t,e.offerProject=function(){return n.add_offer(e.offering_project_id,t.id).then(function(t){return console.log(t),e.notify_success("Project offered")},function(e){return console.log(e),console.log("failed 102")})},e.submitQuestionToAdmin=function(){return e.question_from_employer?r.submit_question_about_freelancer_to_admin(e.question_from_employer,t.id,e.current_user.id).then(function(){return e.notify_success("Question submitted successfully.")},function(e){return console.log(e),console.log("failed 103")}):e.notify_info("Please fill in the form..")}}]),angular.module("platform").controller("ProjectsCtrl",["$scope","Project","job_categories","$route","$rootScope",function(e,t,n,r,i){var o,a=this;return e.$on("search:menu",function(t,n){switch(n.name){case"job_categories":return n.selected===!1?(delete i.projects_query.conditions.job_category_id,e.current_job_category="All"):(i.projects_query.conditions.job_category_id=n.selected.id,e.current_job_category=n.selected.name);case"budget_range":return n.selected===!1?delete i.projects_query.conditions.budget_range:i.projects_query.conditions.budget_range=n.selected}}),e.$on("search:input",function(e,t){return null!=t&&t.length>0?i.projects_query.search=t:delete i.projects_query.search}),this.refreshList=function(){return t.count(i.projects_query).then(function(t){return e.total_results=t,e.total_pages=Math.ceil(t/i.projects_query.per_page)},function(){return e.notify_error("Unable to fetch count from server")}),t.all(i.projects_query).then(function(e){return i.projects=e},function(){return e.notify_error("Unable to fetch result from server")})},e.clearFilters=function(){return i.projects_query={},i.projects_query.search="",i.projects_query.page=1,i.projects_query.per_page=5,i.projects_query.conditions={project_status:"project_pending"},r.reload()},o=function(){return e.current_job_category="All",e.budget_ranges=["S$0 - S$500","S$500 - S$1000","S$1000 - S$2000","S$2000 - S$3000","S$3000 - S$5000","S$5000 - S$10000"],e.job_categories=n,i.projects_query||(i.projects_query={},i.projects_query.search="",i.projects_query.page=1,i.projects_query.per_page=5,i.projects_query.conditions={project_status:"project_pending"},i.$watch("projects_query",function(e,t){return e.page===t.page&&(i.projects_query.page=1),a.refreshList()},!0)),a.refreshList()},o()}]),angular.module("platform").controller("ProjectsShowCtrl",["$scope","project","Project",function(e,t,n){return e.project=t,e.selected_bidder_id=null,e.userEmployed=t.freelancer_id===e.current_user.id,e.userIsEmployer=t.employer_id===e.current_user.id,e.userOffered=_.contains(t.offer_ids,e.current_user.id),e.userBidded=_.contains(t.bidder_ids,e.current_user.id),e.userCanBid=!e.userEmployed&&!e.userBidded&&!e.userOffered,e.bidProject=function(){return n.add_bidder(t.id,e.current_user.id).then(function(t){return e.project=t,e.userOffered=!1,e.userBidded=!0,e.userCanBid=!1,e.notify_success("Your bid has been placed")},function(t){return console.log(t),e.notify_error("Something wrong..")})},e.deleteProject=function(){var r;return r=n.destroy(t.id,{delegate:!0}),r.then(function(){return e.redirect_to("projects",{success:"Your project is deleted"})},function(){return e.notify_error("Unable to delete this project")})},e.completeProject=function(){return n.mark_as_complete(t.id).then(function(){return e.redirect_to("projects",{success:"Your project is now completed"})},function(t){var n,r;return console.log(t),null!=(null!=(n=t.data)?n.message:void 0)?e.notify_error(null!=(r=t.data)?r.message:void 0):void 0})},e.acceptOffer=function(){return n.accept_offer(t.id,e.current_user.id).then(function(t){return e.project=t,e.userOffered=!1,e.userBidded=!1,e.userEmployed=!0,e.userCanBid=!1,e.notify_success("You accepted the offer.")},function(t){return console.log(t),e.notify_error("Something wrong...")})},e.acceptBid=function(r){return console.log(r),null===r?e.notify_error("Please select a bidder from the list"):n.accept_bid(t.id,r).then(function(t){return e.project=t,e.userOffered=!1,e.userBidded=!1,e.userCanBid=!1,e.notify_success("You accepted the bid.")},function(t){return console.log(t),e.notify_error("Something wrong...")})}}]),angular.module("platform").directive("jobCategoriesFilter",[function(){return{restrict:"E",templateUrl:"partials/platform/job_categories_filter.html",scope:{},controller:["$scope",function(e){return e.jobTitles={Writing:_.uniq(["Copywriter","Editor","Journalist","Scriptwriter","Writer"]),Design:_.uniq(["Art Director","Audio Designer","Character Designer","Creative Director","Game Designer","Graphic Designer","Lighting Designer","Motion Graphic Designer","Multimedia Designer","Product Designer","Set Designer","UI/UX Designer","Wardrode Designer","Web Designer"]),Production:_.uniq(["2D Animator","3D Animator","3D Artist","Animator","Audio Producer","Camera Assistant","Cameraman","Casting Manager","DI Artist","Director","Director and Producer","Director of Photography","Grip & Gaffer","Illustrator","Lightingman","Location Manager","Make Up Artist","Musician","Photographer","Production Assistant","Production Manager","Project Manager","Soundman","Storyboard Artist","VFX Artist","Video Editor","Video Producer","Videographer","Videographer and SteadiCam Operator"]),Others:_.uniq(["Commentator","Host","Marketing","PR","Social Media Consultant","Translator","Voiceover Artist","Web Developer"])},e.setJobTitle=function(t){return console.log(t.target.innerHTML),e.$emit("search:menu",{name:"job_title",selected:t.target.innerHTML})}}]}}]),angular.module("platform").directive("searchMenu",[function(){return{restrict:"E",templateUrl:"partials/platform/search.menu.html",scope:{name:"@",options:"@"},controller:["$scope","$parse","$attrs",function(e,t,n){var r,i,o,a,s,u,c;if(a=n.name,s=n.options,r=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w\d]*)|(?:\(\s*([\$\w][\$\w\d]*)\s*,\s*([\$\w][\$\w\d]*)\s*\)))\s+in\s+(.*)$/,!(o=s.match(r)))throw Error("Expected options in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '"+s+"'.");return e.displayFn=t(o[2]||o[1]),u=o[4]||o[6],e.valueFn=t(o[2]?o[1]:u),c=t(o[7]),e.list=function(){var t,n,r,o;for(r=c(e.$parent),o=[],t=0,n=r.length;n>t;t++)i=r[t],o.push({item:i});return o}(),console.log(a),e.select=function(t){return e.$emit("search:menu",{name:a,selected:t})}}]}}]),angular.module("platform").directive("searchInput",["$timeout",function(e){return{restrict:"A",controller:["$scope","$element",function(e,t){return e.$on("search:trigger",function(){return e.search()}),e.search=function(){return e.$emit("search:input",t.val())}}],link:function(t,n){var r;return r=null,n.keyup(function(){return e.cancel(r),r=e(function(){return t.search()},500)})}}}]),angular.module("platform").directive("searchButton",[function(){return{restrict:"A",link:function(e,t){return t.click(function(){return e.$emit("search:trigger")})}}}]);var __hasProp={}.hasOwnProperty,__extends=function(e,t){function n(){this.constructor=e}for(var r in t)__hasProp.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};angular.module("account").factory("Employer",["Restangular","$rootScope","$filter",function(e,t,n){var r,i;return r=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t}(BaseModel),new r(e,t,n,"employer","employers")}]);var __hasProp={}.hasOwnProperty,__extends=function(e,t){function n(){this.constructor=e}for(var r in t)__hasProp.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};angular.module("account").factory("Freelancer",["Restangular","$rootScope","$filter",function(e,t,n){var r,i;return r=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t}(BaseModel),new r(e,t,n,"freelancer","freelancers")}]);var __hasProp={}.hasOwnProperty,__extends=function(e,t){function n(){this.constructor=e}for(var r in t)__hasProp.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};angular.module("platform").factory("JobCategory",["Restangular","$rootScope","$filter",function(e,t,n){var r,i;return r=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t}(BaseModel),new r(e,t,n,"job_category","job_categories")}]);var __hasProp={}.hasOwnProperty,__extends=function(e,t){function n(){this.constructor=e}for(var r in t)__hasProp.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};angular.module("platform").factory("Project",["Restangular","$rootScope","$filter",function(e,t,n){var r,i;return r=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments)}return __extends(n,t),n.prototype.add_bidder=function(t,n){return e.one("projects",t).customPOST("add_bidder",{user_id:n})},n.prototype.add_offer=function(t,n){return e.one("projects",t).customPOST("add_offer",{user_id:n})},n.prototype.accept_offer=function(t,n){return e.one("projects",t).customPOST("accept_offer",{user_id:n})},n.prototype.accept_bid=function(t,n){return e.one("projects",t).customPOST("accept_bid",{user_id:n})},n.prototype.mark_as_complete=function(t){return e.one("projects",t).customPUT("mark_as_complete")},n}(BaseModel),new r(e,t,n,"project","projects")}]),angular.module("platform").config(["$routeProvider","WardenProvider",function(e,t){return t.simplify(e).set_template_prefix("views/platform").when("projects.show/:id",{resolves:["project"],user:!0}).when("projects",{resolves:["job_categories"]}).when("freelancers.show/:id",{resolves:["freelancer"],user:!0}).when("freelancers",{resolves:["job_categories"]})}]),resolvables.freelancer=["Freelancer","$route",function(e,t){var n;return n=t.current.params.id,e.find(n)}],resolvables.freelancers=["Freelancer",function(e){return e.all({conditions:{profile_incomplete:!1},per_page:8})}],resolvables.job_categories=["JobCategory",function(e){return e.all()}],resolvables.project=["$q","Project","$route","$rootScope",function(e,t,n,r){var i,o;return i=n.current.params.id,o=t.find(i,{delegate:!0}),o.then(function(e){return e},function(t){return r.redirect_to("projects",{error:"Project cannot be found"}),e.reject(t)})}];